let e,t,n,i,s;function r(e){let t=e.length;for(;--t>=0;)e[t]=0}let a=573,o=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),l=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),d=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),c=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),h=Array(576);r(h);let u=Array(60);r(u);let p=Array(512);r(p);let f=Array(256);r(f);let g=Array(29);r(g);let m=Array(30);function w(e,t,n,i,s){this.static_tree=e,this.extra_bits=t,this.extra_base=n,this.elems=i,this.max_length=s,this.has_stree=e&&e.length}function b(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}r(m);let v=e=>e<256?p[e]:p[256+(e>>>7)],_=(e,t)=>{e.pending_buf[e.pending++]=255&t,e.pending_buf[e.pending++]=t>>>8&255},y=(e,t,n)=>{e.bi_valid>16-n?(e.bi_buf|=t<<e.bi_valid&65535,_(e,e.bi_buf),e.bi_buf=t>>16-e.bi_valid,e.bi_valid+=n-16):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=n)},x=(e,t,n)=>{y(e,n[2*t],n[2*t+1])},S=(e,t)=>{let n=0;do n|=1&e,e>>>=1,n<<=1;while(--t>0)return n>>>1},k=(e,t,n)=>{let i,s,r=Array(16),a=0;for(i=1;i<=15;i++)a=a+n[i-1]<<1,r[i]=a;for(s=0;s<=t;s++){let t=e[2*s+1];0!==t&&(e[2*s]=S(r[t]++,t))}},E=e=>{let t;for(t=0;t<286;t++)e.dyn_ltree[2*t]=0;for(t=0;t<30;t++)e.dyn_dtree[2*t]=0;for(t=0;t<19;t++)e.bl_tree[2*t]=0;e.dyn_ltree[512]=1,e.opt_len=e.static_len=0,e.sym_next=e.matches=0},C=e=>{e.bi_valid>8?_(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0},O=(e,t,n,i)=>{let s=2*t,r=2*n;return e[s]<e[r]||e[s]===e[r]&&i[t]<=i[n]},A=(e,t,n)=>{let i=e.heap[n],s=n<<1;for(;s<=e.heap_len&&(s<e.heap_len&&O(t,e.heap[s+1],e.heap[s],e.depth)&&s++,!O(t,i,e.heap[s],e.depth));)e.heap[n]=e.heap[s],n=s,s<<=1;e.heap[n]=i},I=(e,t,n)=>{let i,s,r,a,d=0;if(0!==e.sym_next)do i=(255&e.pending_buf[e.sym_buf+d++])+((255&e.pending_buf[e.sym_buf+d++])<<8),s=e.pending_buf[e.sym_buf+d++],0===i?x(e,s,t):(x(e,(r=f[s])+256+1,t),0!==(a=o[r])&&y(e,s-=g[r],a),x(e,r=v(--i),n),0!==(a=l[r])&&y(e,i-=m[r],a));while(d<e.sym_next)x(e,256,t)},z=(e,t)=>{let n,i,s,r=t.dyn_tree,o=t.stat_desc.static_tree,l=t.stat_desc.has_stree,d=t.stat_desc.elems,c=-1;for(n=0,e.heap_len=0,e.heap_max=a;n<d;n++)0!==r[2*n]?(e.heap[++e.heap_len]=c=n,e.depth[n]=0):r[2*n+1]=0;for(;e.heap_len<2;)r[2*(s=e.heap[++e.heap_len]=c<2?++c:0)]=1,e.depth[s]=0,e.opt_len--,l&&(e.static_len-=o[2*s+1]);for(t.max_code=c,n=e.heap_len>>1;n>=1;n--)A(e,r,n);s=d;do n=e.heap[1],e.heap[1]=e.heap[e.heap_len--],A(e,r,1),i=e.heap[1],e.heap[--e.heap_max]=n,e.heap[--e.heap_max]=i,r[2*s]=r[2*n]+r[2*i],e.depth[s]=(e.depth[n]>=e.depth[i]?e.depth[n]:e.depth[i])+1,r[2*n+1]=r[2*i+1]=s,e.heap[1]=s++,A(e,r,1);while(e.heap_len>=2)e.heap[--e.heap_max]=e.heap[1],((e,t)=>{let n,i,s,r,o,l,d=t.dyn_tree,c=t.max_code,h=t.stat_desc.static_tree,u=t.stat_desc.has_stree,p=t.stat_desc.extra_bits,f=t.stat_desc.extra_base,g=t.stat_desc.max_length,m=0;for(r=0;r<=15;r++)e.bl_count[r]=0;for(d[2*e.heap[e.heap_max]+1]=0,n=e.heap_max+1;n<a;n++)(r=d[2*d[2*(i=e.heap[n])+1]+1]+1)>g&&(r=g,m++),d[2*i+1]=r,!(i>c)&&(e.bl_count[r]++,o=0,i>=f&&(o=p[i-f]),l=d[2*i],e.opt_len+=l*(r+o),u&&(e.static_len+=l*(h[2*i+1]+o)));if(0!==m){do{for(r=g-1;0===e.bl_count[r];)r--;e.bl_count[r]--,e.bl_count[r+1]+=2,e.bl_count[g]--,m-=2}while(m>0)for(r=g;0!==r;r--)for(i=e.bl_count[r];0!==i;)!((s=e.heap[--n])>c)&&(d[2*s+1]!==r&&(e.opt_len+=(r-d[2*s+1])*d[2*s],d[2*s+1]=r),i--)}})(e,t),k(r,c,e.bl_count)},D=(e,t,n)=>{let i,s,r=-1,a=t[1],o=0,l=7,d=4;for(0===a&&(l=138,d=3),t[(n+1)*2+1]=65535,i=0;i<=n;i++)s=a,a=t[(i+1)*2+1],++o<l&&s===a||(o<d?e.bl_tree[2*s]+=o:0!==s?(s!==r&&e.bl_tree[2*s]++,e.bl_tree[32]++):o<=10?e.bl_tree[34]++:e.bl_tree[36]++,o=0,r=s,0===a?(l=138,d=3):s===a?(l=6,d=3):(l=7,d=4))},N=(e,t,n)=>{let i,s,r=-1,a=t[1],o=0,l=7,d=4;for(0===a&&(l=138,d=3),i=0;i<=n;i++)if(s=a,a=t[(i+1)*2+1],!(++o<l)||s!==a){if(o<d)do x(e,s,e.bl_tree);while(0!=--o)else 0!==s?(s!==r&&(x(e,s,e.bl_tree),o--),x(e,16,e.bl_tree),y(e,o-3,2)):o<=10?(x(e,17,e.bl_tree),y(e,o-3,3)):(x(e,18,e.bl_tree),y(e,o-11,7));o=0,r=s,0===a?(l=138,d=3):s===a?(l=6,d=3):(l=7,d=4)}},L=!1,M=(e,t,n,i)=>{y(e,0+ +!!i,3),C(e),_(e,n),_(e,~n),n&&e.pending_buf.set(e.window.subarray(t,t+n),e.pending),e.pending+=n};var T,W,j,R,U,F={_tr_init:i=>{L||((()=>{let i,s,r,a,c,b=Array(16);for(a=0,r=0;a<28;a++)for(i=0,g[a]=r;i<1<<o[a];i++)f[r++]=a;for(f[r-1]=a,c=0,a=0;a<16;a++)for(i=0,m[a]=c;i<1<<l[a];i++)p[c++]=a;for(c>>=7;a<30;a++)for(i=0,m[a]=c<<7;i<1<<l[a]-7;i++)p[256+c++]=a;for(s=0;s<=15;s++)b[s]=0;for(i=0;i<=143;)h[2*i+1]=8,i++,b[8]++;for(;i<=255;)h[2*i+1]=9,i++,b[9]++;for(;i<=279;)h[2*i+1]=7,i++,b[7]++;for(;i<=287;)h[2*i+1]=8,i++,b[8]++;for(k(h,287,b),i=0;i<30;i++)u[2*i+1]=5,u[2*i]=S(i,5);e=new w(h,o,257,286,15),t=new w(u,l,0,30,15),n=new w([],d,0,19,7)})(),L=!0),i.l_desc=new b(i.dyn_ltree,e),i.d_desc=new b(i.dyn_dtree,t),i.bl_desc=new b(i.bl_tree,n),i.bi_buf=0,i.bi_valid=0,E(i)},_tr_stored_block:M,_tr_flush_block:(e,t,n,i)=>{let s,r,a=0;e.level>0?(2===e.strm.data_type&&(e.strm.data_type=(e=>{let t,n=0xf3ffc07f;for(t=0;t<=31;t++,n>>>=1)if(1&n&&0!==e.dyn_ltree[2*t])return 0;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return 1;for(t=32;t<256;t++)if(0!==e.dyn_ltree[2*t])return 1;return 0})(e)),z(e,e.l_desc),z(e,e.d_desc),a=(e=>{let t;for(D(e,e.dyn_ltree,e.l_desc.max_code),D(e,e.dyn_dtree,e.d_desc.max_code),z(e,e.bl_desc),t=18;t>=3&&0===e.bl_tree[2*c[t]+1];t--);return e.opt_len+=3*(t+1)+5+5+4,t})(e),s=e.opt_len+3+7>>>3,(r=e.static_len+3+7>>>3)<=s&&(s=r)):s=r=n+5,n+4<=s&&-1!==t?M(e,t,n,i):4===e.strategy||r===s?(y(e,2+ +!!i,3),I(e,h,u)):(y(e,4+ +!!i,3),((e,t,n,i)=>{let s;for(y(e,t-257,5),y(e,n-1,5),y(e,i-4,4),s=0;s<i;s++)y(e,e.bl_tree[2*c[s]+1],3);N(e,e.dyn_ltree,t-1),N(e,e.dyn_dtree,n-1)})(e,e.l_desc.max_code+1,e.d_desc.max_code+1,a+1),I(e,e.dyn_ltree,e.dyn_dtree)),E(e),i&&C(e)},_tr_tally:(e,t,n)=>(e.pending_buf[e.sym_buf+e.sym_next++]=t,e.pending_buf[e.sym_buf+e.sym_next++]=t>>8,e.pending_buf[e.sym_buf+e.sym_next++]=n,0===t?e.dyn_ltree[2*n]++:(e.matches++,t--,e.dyn_ltree[(f[n]+256+1)*2]++,e.dyn_dtree[2*v(t)]++),e.sym_next===e.sym_end),_tr_align:e=>{y(e,2,3),x(e,256,h),16===e.bi_valid?(_(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=255&e.bi_buf,e.bi_buf>>=8,e.bi_valid-=8)}},P=(e,t,n,i)=>{let s=65535&e,r=e>>>16&65535,a=0;for(;0!==n;){a=n>2e3?2e3:n,n-=a;do r=r+(s=s+t[i++]|0)|0;while(--a)s%=65521,r%=65521}return s|r<<16};let B=new Uint32Array((()=>{let e,t=[];for(var n=0;n<256;n++){e=n;for(var i=0;i<8;i++)e=1&e?0xedb88320^e>>>1:e>>>1;t[n]=e}return t})());var $=(e,t,n,i)=>{let s=i+n;e^=-1;for(let n=i;n<s;n++)e=e>>>8^B[(e^t[n])&255];return -1^e},Z={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},H={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};let{_tr_init:V,_tr_stored_block:q,_tr_flush_block:K,_tr_tally:Y,_tr_align:G}=F,{Z_NO_FLUSH:J,Z_PARTIAL_FLUSH:X,Z_FULL_FLUSH:Q,Z_FINISH:ee,Z_BLOCK:et,Z_OK:en,Z_STREAM_END:ei,Z_STREAM_ERROR:es,Z_DATA_ERROR:er,Z_BUF_ERROR:ea,Z_DEFAULT_COMPRESSION:eo,Z_FILTERED:el,Z_HUFFMAN_ONLY:ed,Z_RLE:ec,Z_FIXED:eh,Z_DEFAULT_STRATEGY:eu,Z_UNKNOWN:ep,Z_DEFLATED:ef}=H,eg=573,em=(e,t)=>(e.msg=Z[t],t),ew=e=>2*e-9*(e>4),eb=e=>{let t=e.length;for(;--t>=0;)e[t]=0},ev=e=>{let t,n,i,s=e.w_size;i=t=e.hash_size;do n=e.head[--i],e.head[i]=n>=s?n-s:0;while(--t)i=t=s;do n=e.prev[--i],e.prev[i]=n>=s?n-s:0;while(--t)},e_=(e,t,n)=>(t<<e.hash_shift^n)&e.hash_mask,ey=e=>{let t=e.state,n=t.pending;n>e.avail_out&&(n=e.avail_out),0!==n&&(e.output.set(t.pending_buf.subarray(t.pending_out,t.pending_out+n),e.next_out),e.next_out+=n,t.pending_out+=n,e.total_out+=n,e.avail_out-=n,t.pending-=n,0===t.pending&&(t.pending_out=0))},ex=(e,t)=>{K(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,ey(e.strm)},eS=(e,t)=>{e.pending_buf[e.pending++]=t},ek=(e,t)=>{e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=255&t},eE=(e,t,n,i)=>{let s=e.avail_in;return(s>i&&(s=i),0===s)?0:(e.avail_in-=s,t.set(e.input.subarray(e.next_in,e.next_in+s),n),1===e.state.wrap?e.adler=P(e.adler,t,s,n):2===e.state.wrap&&(e.adler=$(e.adler,t,s,n)),e.next_in+=s,e.total_in+=s,s)},eC=(e,t)=>{let n,i,s=e.max_chain_length,r=e.strstart,a=e.prev_length,o=e.nice_match,l=e.strstart>e.w_size-262?e.strstart-(e.w_size-262):0,d=e.window,c=e.w_mask,h=e.prev,u=e.strstart+258,p=d[r+a-1],f=d[r+a];e.prev_length>=e.good_match&&(s>>=2),o>e.lookahead&&(o=e.lookahead);do{if(d[(n=t)+a]!==f||d[n+a-1]!==p||d[n]!==d[r]||d[++n]!==d[r+1])continue;r+=2,n++;do;while(d[++r]===d[++n]&&d[++r]===d[++n]&&d[++r]===d[++n]&&d[++r]===d[++n]&&d[++r]===d[++n]&&d[++r]===d[++n]&&d[++r]===d[++n]&&d[++r]===d[++n]&&r<u)if(i=258-(u-r),r=u-258,i>a){if(e.match_start=t,a=i,i>=o)break;p=d[r+a-1],f=d[r+a]}}while((t=h[t&c])>l&&0!=--s)return a<=e.lookahead?a:e.lookahead},eO=e=>{let t,n,i,s=e.w_size;do{if(n=e.window_size-e.lookahead-e.strstart,e.strstart>=s+(s-262)&&(e.window.set(e.window.subarray(s,s+s-n),0),e.match_start-=s,e.strstart-=s,e.block_start-=s,e.insert>e.strstart&&(e.insert=e.strstart),ev(e),n+=s),0===e.strm.avail_in)break;if(t=eE(e.strm,e.window,e.strstart+e.lookahead,n),e.lookahead+=t,e.lookahead+e.insert>=3)for(i=e.strstart-e.insert,e.ins_h=e.window[i],e.ins_h=e_(e,e.ins_h,e.window[i+1]);e.insert&&(e.ins_h=e_(e,e.ins_h,e.window[i+3-1]),e.prev[i&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=i,i++,e.insert--,!(e.lookahead+e.insert<3)););}while(e.lookahead<262&&0!==e.strm.avail_in)},eA=(e,t)=>{let n=e.pending_buf_size-5>e.w_size?e.w_size:e.pending_buf_size-5,i,s,r,a=0,o=e.strm.avail_in;do{if(i=65535,r=e.bi_valid+42>>3,e.strm.avail_out<r||(r=e.strm.avail_out-r,i>(s=e.strstart-e.block_start)+e.strm.avail_in&&(i=s+e.strm.avail_in),i>r&&(i=r),i<n&&(0===i&&t!==ee||t===J||i!==s+e.strm.avail_in)))break;a=+(t===ee&&i===s+e.strm.avail_in),q(e,0,0,a),e.pending_buf[e.pending-4]=i,e.pending_buf[e.pending-3]=i>>8,e.pending_buf[e.pending-2]=~i,e.pending_buf[e.pending-1]=~i>>8,ey(e.strm),s&&(s>i&&(s=i),e.strm.output.set(e.window.subarray(e.block_start,e.block_start+s),e.strm.next_out),e.strm.next_out+=s,e.strm.avail_out-=s,e.strm.total_out+=s,e.block_start+=s,i-=s),i&&(eE(e.strm,e.strm.output,e.strm.next_out,i),e.strm.next_out+=i,e.strm.avail_out-=i,e.strm.total_out+=i)}while(0===a)return((o-=e.strm.avail_in)&&(o>=e.w_size?(e.matches=2,e.window.set(e.strm.input.subarray(e.strm.next_in-e.w_size,e.strm.next_in),0),e.strstart=e.w_size,e.insert=e.strstart):(e.window_size-e.strstart<=o&&(e.strstart-=e.w_size,e.window.set(e.window.subarray(e.w_size,e.w_size+e.strstart),0),e.matches<2&&e.matches++,e.insert>e.strstart&&(e.insert=e.strstart)),e.window.set(e.strm.input.subarray(e.strm.next_in-o,e.strm.next_in),e.strstart),e.strstart+=o,e.insert+=o>e.w_size-e.insert?e.w_size-e.insert:o),e.block_start=e.strstart),e.high_water<e.strstart&&(e.high_water=e.strstart),a)?4:t!==J&&t!==ee&&0===e.strm.avail_in&&e.strstart===e.block_start?2:(r=e.window_size-e.strstart,e.strm.avail_in>r&&e.block_start>=e.w_size&&(e.block_start-=e.w_size,e.strstart-=e.w_size,e.window.set(e.window.subarray(e.w_size,e.w_size+e.strstart),0),e.matches<2&&e.matches++,r+=e.w_size,e.insert>e.strstart&&(e.insert=e.strstart)),r>e.strm.avail_in&&(r=e.strm.avail_in),r&&(eE(e.strm,e.window,e.strstart,r),e.strstart+=r,e.insert+=r>e.w_size-e.insert?e.w_size-e.insert:r),e.high_water<e.strstart&&(e.high_water=e.strstart),r=e.bi_valid+42>>3,n=(r=e.pending_buf_size-r>65535?65535:e.pending_buf_size-r)>e.w_size?e.w_size:r,((s=e.strstart-e.block_start)>=n||(s||t===ee)&&t!==J&&0===e.strm.avail_in&&s<=r)&&(i=s>r?r:s,a=+(t===ee&&0===e.strm.avail_in&&i===s),q(e,e.block_start,i,a),e.block_start+=i,ey(e.strm)),a?3:1)},eI=(e,t)=>{let n,i;for(;;){if(e.lookahead<262){if(eO(e),e.lookahead<262&&t===J)return 1;if(0===e.lookahead)break}if(n=0,e.lookahead>=3&&(e.ins_h=e_(e,e.ins_h,e.window[e.strstart+3-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!==n&&e.strstart-n<=e.w_size-262&&(e.match_length=eC(e,n)),e.match_length>=3)if(i=Y(e,e.strstart-e.match_start,e.match_length-3),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=3){e.match_length--;do e.strstart++,e.ins_h=e_(e,e.ins_h,e.window[e.strstart+3-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart;while(0!=--e.match_length)e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=e_(e,e.ins_h,e.window[e.strstart+1]);else i=Y(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(i&&(ex(e,!1),0===e.strm.avail_out))return 1}return(e.insert=e.strstart<2?e.strstart:2,t===ee)?(ex(e,!0),0===e.strm.avail_out)?3:4:e.sym_next&&(ex(e,!1),0===e.strm.avail_out)?1:2},ez=(e,t)=>{let n,i,s;for(;;){if(e.lookahead<262){if(eO(e),e.lookahead<262&&t===J)return 1;if(0===e.lookahead)break}if(n=0,e.lookahead>=3&&(e.ins_h=e_(e,e.ins_h,e.window[e.strstart+3-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=2,0!==n&&e.prev_length<e.max_lazy_match&&e.strstart-n<=e.w_size-262&&(e.match_length=eC(e,n),e.match_length<=5&&(e.strategy===el||3===e.match_length&&e.strstart-e.match_start>4096)&&(e.match_length=2)),e.prev_length>=3&&e.match_length<=e.prev_length){s=e.strstart+e.lookahead-3,i=Y(e,e.strstart-1-e.prev_match,e.prev_length-3),e.lookahead-=e.prev_length-1,e.prev_length-=2;do++e.strstart<=s&&(e.ins_h=e_(e,e.ins_h,e.window[e.strstart+3-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart);while(0!=--e.prev_length)if(e.match_available=0,e.match_length=2,e.strstart++,i&&(ex(e,!1),0===e.strm.avail_out))return 1}else if(e.match_available){if((i=Y(e,0,e.window[e.strstart-1]))&&ex(e,!1),e.strstart++,e.lookahead--,0===e.strm.avail_out)return 1}else e.match_available=1,e.strstart++,e.lookahead--}return(e.match_available&&(i=Y(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<2?e.strstart:2,t===ee)?(ex(e,!0),0===e.strm.avail_out)?3:4:e.sym_next&&(ex(e,!1),0===e.strm.avail_out)?1:2};function eD(e,t,n,i,s){this.good_length=e,this.max_lazy=t,this.nice_length=n,this.max_chain=i,this.func=s}let eN=[new eD(0,0,0,0,eA),new eD(4,4,8,4,eI),new eD(4,5,16,8,eI),new eD(4,6,32,32,eI),new eD(4,4,16,16,ez),new eD(8,16,32,32,ez),new eD(8,16,128,128,ez),new eD(8,32,128,256,ez),new eD(32,128,258,1024,ez),new eD(32,258,258,4096,ez)];function eL(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=ef,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(2*eg),this.dyn_dtree=new Uint16Array(122),this.bl_tree=new Uint16Array(78),eb(this.dyn_ltree),eb(this.dyn_dtree),eb(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(16),this.heap=new Uint16Array(573),eb(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(573),eb(this.depth),this.sym_buf=0,this.lit_bufsize=0,this.sym_next=0,this.sym_end=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}let eM=e=>{if(!e)return 1;let t=e.state;return t&&t.strm===e&&(42===t.status||57===t.status||69===t.status||73===t.status||91===t.status||103===t.status||113===t.status||666===t.status)?0:1};var eT=(e,t)=>{if(eM(e)||t>et||t<0)return e?em(e,es):es;let n=e.state;if(!e.output||0!==e.avail_in&&!e.input||666===n.status&&t!==ee)return em(e,0===e.avail_out?ea:es);let i=n.last_flush;if(n.last_flush=t,0!==n.pending){if(ey(e),0===e.avail_out)return n.last_flush=-1,en}else if(0===e.avail_in&&ew(t)<=ew(i)&&t!==ee)return em(e,ea);if(666===n.status&&0!==e.avail_in)return em(e,ea);if(42===n.status&&0===n.wrap&&(n.status=113),42===n.status){let t=ef+(n.w_bits-8<<4)<<8;if(t|=(n.strategy>=ed||n.level<2?0:n.level<6?1:6===n.level?2:3)<<6,0!==n.strstart&&(t|=32),ek(n,t+=31-t%31),0!==n.strstart&&(ek(n,e.adler>>>16),ek(n,65535&e.adler)),e.adler=1,n.status=113,ey(e),0!==n.pending)return n.last_flush=-1,en}if(57===n.status){if(e.adler=0,eS(n,31),eS(n,139),eS(n,8),n.gzhead)eS(n,+!!n.gzhead.text+2*!!n.gzhead.hcrc+4*!!n.gzhead.extra+8*!!n.gzhead.name+16*!!n.gzhead.comment),eS(n,255&n.gzhead.time),eS(n,n.gzhead.time>>8&255),eS(n,n.gzhead.time>>16&255),eS(n,n.gzhead.time>>24&255),eS(n,9===n.level?2:4*(n.strategy>=ed||n.level<2)),eS(n,255&n.gzhead.os),n.gzhead.extra&&n.gzhead.extra.length&&(eS(n,255&n.gzhead.extra.length),eS(n,n.gzhead.extra.length>>8&255)),n.gzhead.hcrc&&(e.adler=$(e.adler,n.pending_buf,n.pending,0)),n.gzindex=0,n.status=69;else if(eS(n,0),eS(n,0),eS(n,0),eS(n,0),eS(n,0),eS(n,9===n.level?2:4*(n.strategy>=ed||n.level<2)),eS(n,3),n.status=113,ey(e),0!==n.pending)return n.last_flush=-1,en}if(69===n.status){if(n.gzhead.extra){let t=n.pending,i=(65535&n.gzhead.extra.length)-n.gzindex;for(;n.pending+i>n.pending_buf_size;){let s=n.pending_buf_size-n.pending;if(n.pending_buf.set(n.gzhead.extra.subarray(n.gzindex,n.gzindex+s),n.pending),n.pending=n.pending_buf_size,n.gzhead.hcrc&&n.pending>t&&(e.adler=$(e.adler,n.pending_buf,n.pending-t,t)),n.gzindex+=s,ey(e),0!==n.pending)return n.last_flush=-1,en;t=0,i-=s}let s=new Uint8Array(n.gzhead.extra);n.pending_buf.set(s.subarray(n.gzindex,n.gzindex+i),n.pending),n.pending+=i,n.gzhead.hcrc&&n.pending>t&&(e.adler=$(e.adler,n.pending_buf,n.pending-t,t)),n.gzindex=0}n.status=73}if(73===n.status){if(n.gzhead.name){let t,i=n.pending;do{if(n.pending===n.pending_buf_size){if(n.gzhead.hcrc&&n.pending>i&&(e.adler=$(e.adler,n.pending_buf,n.pending-i,i)),ey(e),0!==n.pending)return n.last_flush=-1,en;i=0}t=n.gzindex<n.gzhead.name.length?255&n.gzhead.name.charCodeAt(n.gzindex++):0,eS(n,t)}while(0!==t)n.gzhead.hcrc&&n.pending>i&&(e.adler=$(e.adler,n.pending_buf,n.pending-i,i)),n.gzindex=0}n.status=91}if(91===n.status){if(n.gzhead.comment){let t,i=n.pending;do{if(n.pending===n.pending_buf_size){if(n.gzhead.hcrc&&n.pending>i&&(e.adler=$(e.adler,n.pending_buf,n.pending-i,i)),ey(e),0!==n.pending)return n.last_flush=-1,en;i=0}t=n.gzindex<n.gzhead.comment.length?255&n.gzhead.comment.charCodeAt(n.gzindex++):0,eS(n,t)}while(0!==t)n.gzhead.hcrc&&n.pending>i&&(e.adler=$(e.adler,n.pending_buf,n.pending-i,i))}n.status=103}if(103===n.status){if(n.gzhead.hcrc){if(n.pending+2>n.pending_buf_size&&(ey(e),0!==n.pending))return n.last_flush=-1,en;eS(n,255&e.adler),eS(n,e.adler>>8&255),e.adler=0}if(n.status=113,ey(e),0!==n.pending)return n.last_flush=-1,en}if(0!==e.avail_in||0!==n.lookahead||t!==J&&666!==n.status){let i=0===n.level?eA(n,t):n.strategy===ed?((e,t)=>{let n;for(;;){if(0===e.lookahead&&(eO(e),0===e.lookahead)){if(t===J)return 1;break}if(e.match_length=0,n=Y(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,n&&(ex(e,!1),0===e.strm.avail_out))return 1}return(e.insert=0,t===ee)?(ex(e,!0),0===e.strm.avail_out)?3:4:e.sym_next&&(ex(e,!1),0===e.strm.avail_out)?1:2})(n,t):n.strategy===ec?((e,t)=>{let n,i,s,r,a=e.window;for(;;){if(e.lookahead<=258){if(eO(e),e.lookahead<=258&&t===J)return 1;if(0===e.lookahead)break}if(e.match_length=0,e.lookahead>=3&&e.strstart>0&&(i=a[s=e.strstart-1])===a[++s]&&i===a[++s]&&i===a[++s]){r=e.strstart+258;do;while(i===a[++s]&&i===a[++s]&&i===a[++s]&&i===a[++s]&&i===a[++s]&&i===a[++s]&&i===a[++s]&&i===a[++s]&&s<r)e.match_length=258-(r-s),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=3?(n=Y(e,1,e.match_length-3),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(n=Y(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),n&&(ex(e,!1),0===e.strm.avail_out))return 1}return(e.insert=0,t===ee)?(ex(e,!0),0===e.strm.avail_out)?3:4:e.sym_next&&(ex(e,!1),0===e.strm.avail_out)?1:2})(n,t):eN[n.level].func(n,t);if((3===i||4===i)&&(n.status=666),1===i||3===i)return 0===e.avail_out&&(n.last_flush=-1),en;if(2===i&&(t===X?G(n):t!==et&&(q(n,0,0,!1),t===Q&&(eb(n.head),0===n.lookahead&&(n.strstart=0,n.block_start=0,n.insert=0))),ey(e),0===e.avail_out))return n.last_flush=-1,en}return t!==ee?en:n.wrap<=0?ei:(2===n.wrap?(eS(n,255&e.adler),eS(n,e.adler>>8&255),eS(n,e.adler>>16&255),eS(n,e.adler>>24&255),eS(n,255&e.total_in),eS(n,e.total_in>>8&255),eS(n,e.total_in>>16&255),eS(n,e.total_in>>24&255)):(ek(n,e.adler>>>16),ek(n,65535&e.adler)),ey(e),n.wrap>0&&(n.wrap=-n.wrap),0!==n.pending?en:ei)},eW=e=>{if(eM(e))return es;let t=e.state.status;return e.state=null,113===t?em(e,er):en};let ej=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var eR=function(e){let t=Array.prototype.slice.call(arguments,1);for(;t.length;){let n=t.shift();if(n){if("object"!=typeof n)throw TypeError(n+"must be non-object");for(let t in n)ej(n,t)&&(e[t]=n[t])}}return e},eU=e=>{let t=0;for(let n=0,i=e.length;n<i;n++)t+=e[n].length;let n=new Uint8Array(t);for(let t=0,i=0,s=e.length;t<s;t++){let s=e[t];n.set(s,i),i+=s.length}return n};let eF=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(e){eF=!1}let eP=new Uint8Array(256);for(let e=0;e<256;e++)eP[e]=e>=252?6:e>=248?5:e>=240?4:e>=224?3:e>=192?2:1;eP[254]=eP[254]=1;var eB=e=>{if("function"==typeof TextEncoder&&TextEncoder.prototype.encode)return new TextEncoder().encode(e);let t,n,i,s,r,a=e.length,o=0;for(s=0;s<a;s++)(64512&(n=e.charCodeAt(s)))==55296&&s+1<a&&(64512&(i=e.charCodeAt(s+1)))==56320&&(n=65536+(n-55296<<10)+(i-56320),s++),o+=n<128?1:n<2048?2:n<65536?3:4;for(r=0,t=new Uint8Array(o),s=0;r<o;s++)(64512&(n=e.charCodeAt(s)))==55296&&s+1<a&&(64512&(i=e.charCodeAt(s+1)))==56320&&(n=65536+(n-55296<<10)+(i-56320),s++),n<128?t[r++]=n:(n<2048?t[r++]=192|n>>>6:(n<65536?t[r++]=224|n>>>12:(t[r++]=240|n>>>18,t[r++]=128|n>>>12&63),t[r++]=128|n>>>6&63),t[r++]=128|63&n);return t},e$=(e,t)=>{let n,i,s=t||e.length;if("function"==typeof TextDecoder&&TextDecoder.prototype.decode)return new TextDecoder().decode(e.subarray(0,t));let r=Array(2*s);for(i=0,n=0;n<s;){let t=e[n++];if(t<128){r[i++]=t;continue}let a=eP[t];if(a>4){r[i++]=65533,n+=a-1;continue}for(t&=2===a?31:3===a?15:7;a>1&&n<s;)t=t<<6|63&e[n++],a--;if(a>1){r[i++]=65533;continue}t<65536?r[i++]=t:(t-=65536,r[i++]=55296|t>>10&1023,r[i++]=56320|1023&t)}var a=i;if(a<65534&&r.subarray&&eF)return String.fromCharCode.apply(null,r.length===a?r:r.subarray(0,a));let o="";for(let e=0;e<a;e++)o+=String.fromCharCode(r[e]);return o},eZ=(e,t)=>{(t=t||e.length)>e.length&&(t=e.length);let n=t-1;for(;n>=0&&(192&e[n])==128;)n--;return n<0||0===n?t:n+eP[e[n]]>t?n:t},eH=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0};let eV=Object.prototype.toString,{Z_NO_FLUSH:eq,Z_SYNC_FLUSH:eK,Z_FULL_FLUSH:eY,Z_FINISH:eG,Z_OK:eJ,Z_STREAM_END:eX,Z_DEFAULT_COMPRESSION:eQ,Z_DEFAULT_STRATEGY:e0,Z_DEFLATED:e1}=H;function e2(e){let t,n;this.options=eR({level:eQ,method:e1,chunkSize:16384,windowBits:15,memLevel:8,strategy:e0},e||{});let i=this.options;i.raw&&i.windowBits>0?i.windowBits=-i.windowBits:i.gzip&&i.windowBits>0&&i.windowBits<16&&(i.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new eH,this.strm.avail_out=0;let s=((e,t,n,i,s,r)=>{var a,o;let l;if(!e)return es;let d=1;if(t===eo&&(t=6),i<0?(d=0,i=-i):i>15&&(d=2,i-=16),s<1||s>9||n!==ef||i<8||i>15||t<0||t>9||r<0||r>eh||8===i&&1!==d)return em(e,es);8===i&&(i=9);let c=new eL;return e.state=c,c.strm=e,c.status=42,c.wrap=d,c.gzhead=null,c.w_bits=i,c.w_size=1<<c.w_bits,c.w_mask=c.w_size-1,c.hash_bits=s+7,c.hash_size=1<<c.hash_bits,c.hash_mask=c.hash_size-1,c.hash_shift=~~((c.hash_bits+3-1)/3),c.window=new Uint8Array(2*c.w_size),c.head=new Uint16Array(c.hash_size),c.prev=new Uint16Array(c.w_size),c.lit_bufsize=1<<s+6,c.pending_buf_size=4*c.lit_bufsize,c.pending_buf=new Uint8Array(c.pending_buf_size),c.sym_buf=c.lit_bufsize,c.sym_end=(c.lit_bufsize-1)*3,c.level=t,c.strategy=r,c.method=n,(l=(e=>{if(eM(e))return em(e,es);e.total_in=e.total_out=0,e.data_type=ep;let t=e.state;return t.pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=2===t.wrap?57:t.wrap?42:113,e.adler=+(2!==t.wrap),t.last_flush=-2,V(t),en})(a=e))===en&&((o=a.state).window_size=2*o.w_size,eb(o.head),o.max_lazy_match=eN[o.level].max_lazy,o.good_match=eN[o.level].good_length,o.nice_match=eN[o.level].nice_length,o.max_chain_length=eN[o.level].max_chain,o.strstart=0,o.block_start=0,o.lookahead=0,o.insert=0,o.match_length=o.prev_length=2,o.match_available=0,o.ins_h=0),l})(this.strm,i.level,i.method,i.windowBits,i.memLevel,i.strategy);if(s!==eJ)throw Error(Z[s]);if(i.header&&(t=this.strm,n=i.header,eM(t)||2!==t.state.wrap||(t.state.gzhead=n)),i.dictionary){let e;if(e="string"==typeof i.dictionary?eB(i.dictionary):"[object ArrayBuffer]"===eV.call(i.dictionary)?new Uint8Array(i.dictionary):i.dictionary,(s=((e,t)=>{let n=t.length;if(eM(e))return es;let i=e.state,s=i.wrap;if(2===s||1===s&&42!==i.status||i.lookahead)return es;if(1===s&&(e.adler=P(e.adler,t,n,0)),i.wrap=0,n>=i.w_size){0===s&&(eb(i.head),i.strstart=0,i.block_start=0,i.insert=0);let e=new Uint8Array(i.w_size);e.set(t.subarray(n-i.w_size,n),0),t=e,n=i.w_size}let r=e.avail_in,a=e.next_in,o=e.input;for(e.avail_in=n,e.next_in=0,e.input=t,eO(i);i.lookahead>=3;){let e=i.strstart,t=i.lookahead-2;do i.ins_h=e_(i,i.ins_h,i.window[e+3-1]),i.prev[e&i.w_mask]=i.head[i.ins_h],i.head[i.ins_h]=e,e++;while(--t)i.strstart=e,i.lookahead=2,eO(i)}return i.strstart+=i.lookahead,i.block_start=i.strstart,i.insert=i.lookahead,i.lookahead=0,i.match_length=i.prev_length=2,i.match_available=0,e.next_in=a,e.input=o,e.avail_in=r,i.wrap=s,en})(this.strm,e))!==eJ)throw Error(Z[s]);this._dict_set=!0}}function e5(e,t){let n=new e2(t);if(n.push(e,!0),n.err)throw n.msg||Z[n.err];return n.result}e2.prototype.push=function(e,t){let n,i,s=this.strm,r=this.options.chunkSize;if(this.ended)return!1;for(i=t===~~t?t:!0===t?eG:eq,"string"==typeof e?s.input=eB(e):"[object ArrayBuffer]"===eV.call(e)?s.input=new Uint8Array(e):s.input=e,s.next_in=0,s.avail_in=s.input.length;;){if(0===s.avail_out&&(s.output=new Uint8Array(r),s.next_out=0,s.avail_out=r),(i===eK||i===eY)&&s.avail_out<=6){this.onData(s.output.subarray(0,s.next_out)),s.avail_out=0;continue}if((n=eT(s,i))===eX)return s.next_out>0&&this.onData(s.output.subarray(0,s.next_out)),n=eW(this.strm),this.onEnd(n),this.ended=!0,n===eJ;if(0===s.avail_out){this.onData(s.output);continue}if(i>0&&s.next_out>0){this.onData(s.output.subarray(0,s.next_out)),s.avail_out=0;continue}if(0===s.avail_in)break}return!0},e2.prototype.onData=function(e){this.chunks.push(e)},e2.prototype.onEnd=function(e){e===eJ&&(this.result=eU(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};var e6=function(e,t){let n,i,s,r,a,o,l,d,c,h,u,p,f,g,m,w,b,v,_,y,x,S,k,E,C=e.state;n=e.next_in,k=e.input,i=n+(e.avail_in-5),s=e.next_out,E=e.output,r=s-(t-e.avail_out),a=s+(e.avail_out-257),o=C.dmax,l=C.wsize,d=C.whave,c=C.wnext,h=C.window,u=C.hold,p=C.bits,f=C.lencode,g=C.distcode,m=(1<<C.lenbits)-1,w=(1<<C.distbits)-1;e:do for(p<15&&(u+=k[n++]<<p,p+=8,u+=k[n++]<<p,p+=8),b=f[u&m];;){if(u>>>=v=b>>>24,p-=v,0==(v=b>>>16&255))E[s++]=65535&b;else if(16&v)for(_=65535&b,(v&=15)&&(p<v&&(u+=k[n++]<<p,p+=8),_+=u&(1<<v)-1,u>>>=v,p-=v),p<15&&(u+=k[n++]<<p,p+=8,u+=k[n++]<<p,p+=8),b=g[u&w];;){if(u>>>=v=b>>>24,p-=v,16&(v=b>>>16&255)){if(y=65535&b,p<(v&=15)&&(u+=k[n++]<<p,(p+=8)<v&&(u+=k[n++]<<p,p+=8)),(y+=u&(1<<v)-1)>o){e.msg="invalid distance too far back",C.mode=16209;break e}if(u>>>=v,p-=v,y>(v=s-r)){if((v=y-v)>d&&C.sane){e.msg="invalid distance too far back",C.mode=16209;break e}if(x=0,S=h,0===c){if(x+=l-v,v<_){_-=v;do E[s++]=h[x++];while(--v)x=s-y,S=E}}else if(c<v){if(x+=l+c-v,(v-=c)<_){_-=v;do E[s++]=h[x++];while(--v)if(x=0,c<_){_-=v=c;do E[s++]=h[x++];while(--v)x=s-y,S=E}}}else if(x+=c-v,v<_){_-=v;do E[s++]=h[x++];while(--v)x=s-y,S=E}for(;_>2;)E[s++]=S[x++],E[s++]=S[x++],E[s++]=S[x++],_-=3;_&&(E[s++]=S[x++],_>1&&(E[s++]=S[x++]))}else{x=s-y;do E[s++]=E[x++],E[s++]=E[x++],E[s++]=E[x++],_-=3;while(_>2)_&&(E[s++]=E[x++],_>1&&(E[s++]=E[x++]))}}else if((64&v)==0){b=g[(65535&b)+(u&(1<<v)-1)];continue}else{e.msg="invalid distance code",C.mode=16209;break e}break}else if((64&v)==0){b=f[(65535&b)+(u&(1<<v)-1)];continue}else if(32&v){C.mode=16191;break e}else{e.msg="invalid literal/length code",C.mode=16209;break e}break}while(n<i&&s<a)n-=_=p>>3,p-=_<<3,u&=(1<<p)-1,e.next_in=n,e.next_out=s,e.avail_in=n<i?5+(i-n):5-(n-i),e.avail_out=s<a?257+(a-s):257-(s-a),C.hold=u,C.bits=p};let e3=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),e8=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),e4=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),e9=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]);var e7=(e,t,n,i,s,r,a,o)=>{let l,d,c,h,u,p,f,g,m,w=o.bits,b=0,v=0,_=0,y=0,x=0,S=0,k=0,E=0,C=0,O=0,A=null,I=new Uint16Array(16),z=new Uint16Array(16),D=null;for(b=0;b<=15;b++)I[b]=0;for(v=0;v<i;v++)I[t[n+v]]++;for(y=15,x=w;y>=1&&0===I[y];y--);if(x>y&&(x=y),0===y)return s[r++]=0x1400000,s[r++]=0x1400000,o.bits=1,0;for(_=1;_<y&&0===I[_];_++);for(x<_&&(x=_),E=1,b=1;b<=15;b++)if(E<<=1,(E-=I[b])<0)return -1;if(E>0&&(0===e||1!==y))return -1;for(b=1,z[1]=0;b<15;b++)z[b+1]=z[b]+I[b];for(v=0;v<i;v++)0!==t[n+v]&&(a[z[t[n+v]]++]=v);if(0===e?(A=D=a,p=20):1===e?(A=e3,D=e8,p=257):(A=e4,D=e9,p=0),O=0,v=0,b=_,u=r,S=x,k=0,c=-1,h=(C=1<<x)-1,1===e&&C>852||2===e&&C>592)return 1;for(;;){f=b-k,a[v]+1<p?(g=0,m=a[v]):a[v]>=p?(g=D[a[v]-p],m=A[a[v]-p]):(g=96,m=0),l=1<<b-k,_=d=1<<S;do s[u+(O>>k)+(d-=l)]=f<<24|g<<16|m;while(0!==d)for(l=1<<b-1;O&l;)l>>=1;if(0!==l?(O&=l-1,O+=l):O=0,v++,0==--I[b]){if(b===y)break;b=t[n+a[v]]}if(b>x&&(O&h)!==c){for(0===k&&(k=x),u+=_,E=1<<(S=b-k);S+k<y&&!((E-=I[S+k])<=0);)S++,E<<=1;if(C+=1<<S,1===e&&C>852||2===e&&C>592)return 1;s[c=O&h]=x<<24|S<<16|u-r}}return 0!==O&&(s[u+O]=b-k<<24|4194304),o.bits=x,0};let{Z_FINISH:te,Z_BLOCK:tt,Z_TREES:tn,Z_OK:ti,Z_STREAM_END:ts,Z_NEED_DICT:tr,Z_STREAM_ERROR:ta,Z_DATA_ERROR:to,Z_MEM_ERROR:tl,Z_BUF_ERROR:td,Z_DEFLATED:tc}=H,th=e=>(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24);function tu(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}let tp=e=>{if(!e)return 1;let t=e.state;return+(!t||t.strm!==e||t.mode<16180||t.mode>16211)},tf=e=>{if(tp(e))return ta;let t=e.state;return t.wsize=0,t.whave=0,t.wnext=0,(e=>{if(tp(e))return ta;let t=e.state;return e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=16180,t.last=0,t.havedict=0,t.flags=-1,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new Int32Array(852),t.distcode=t.distdyn=new Int32Array(592),t.sane=1,t.back=-1,ti})(e)},tg=!0,tm=e=>{if(tg){i=new Int32Array(512),s=new Int32Array(32);let t=0;for(;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(e7(1,e.lens,0,288,i,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;e7(2,e.lens,0,32,s,0,e.work,{bits:5}),tg=!1}e.lencode=i,e.lenbits=9,e.distcode=s,e.distbits=5},tw=(e,t,n,i)=>{let s,r=e.state;return null===r.window&&(r.wsize=1<<r.wbits,r.wnext=0,r.whave=0,r.window=new Uint8Array(r.wsize)),i>=r.wsize?(r.window.set(t.subarray(n-r.wsize,n),0),r.wnext=0,r.whave=r.wsize):((s=r.wsize-r.wnext)>i&&(s=i),r.window.set(t.subarray(n-i,n-i+s),r.wnext),(i-=s)?(r.window.set(t.subarray(n-i,n),0),r.wnext=i,r.whave=r.wsize):(r.wnext+=s,r.wnext===r.wsize&&(r.wnext=0),r.whave<r.wsize&&(r.whave+=s))),0};var tb=(e,t)=>{let n,i,s,r,a,o,l,d,c,h,u,p,f,g,m,w,b,v,_,y,x,S,k,E,C=0,O=new Uint8Array(4),A=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(tp(e)||!e.output||!e.input&&0!==e.avail_in)return ta;16191===(n=e.state).mode&&(n.mode=16192),a=e.next_out,s=e.output,l=e.avail_out,r=e.next_in,i=e.input,o=e.avail_in,d=n.hold,c=n.bits,h=o,u=l,S=ti;t:for(;;)switch(n.mode){case 16180:if(0===n.wrap){n.mode=16192;break}for(;c<16;){if(0===o)break t;o--,d+=i[r++]<<c,c+=8}if(2&n.wrap&&35615===d){0===n.wbits&&(n.wbits=15),n.check=0,O[0]=255&d,O[1]=d>>>8&255,n.check=$(n.check,O,2,0),d=0,c=0,n.mode=16181;break}if(n.head&&(n.head.done=!1),!(1&n.wrap)||(((255&d)<<8)+(d>>8))%31){e.msg="incorrect header check",n.mode=16209;break}if((15&d)!==tc){e.msg="unknown compression method",n.mode=16209;break}if(d>>>=4,c-=4,x=(15&d)+8,0===n.wbits&&(n.wbits=x),x>15||x>n.wbits){e.msg="invalid window size",n.mode=16209;break}n.dmax=1<<n.wbits,n.flags=0,e.adler=n.check=1,n.mode=512&d?16189:16191,d=0,c=0;break;case 16181:for(;c<16;){if(0===o)break t;o--,d+=i[r++]<<c,c+=8}if(n.flags=d,(255&n.flags)!==tc){e.msg="unknown compression method",n.mode=16209;break}if(57344&n.flags){e.msg="unknown header flags set",n.mode=16209;break}n.head&&(n.head.text=d>>8&1),512&n.flags&&4&n.wrap&&(O[0]=255&d,O[1]=d>>>8&255,n.check=$(n.check,O,2,0)),d=0,c=0,n.mode=16182;case 16182:for(;c<32;){if(0===o)break t;o--,d+=i[r++]<<c,c+=8}n.head&&(n.head.time=d),512&n.flags&&4&n.wrap&&(O[0]=255&d,O[1]=d>>>8&255,O[2]=d>>>16&255,O[3]=d>>>24&255,n.check=$(n.check,O,4,0)),d=0,c=0,n.mode=16183;case 16183:for(;c<16;){if(0===o)break t;o--,d+=i[r++]<<c,c+=8}n.head&&(n.head.xflags=255&d,n.head.os=d>>8),512&n.flags&&4&n.wrap&&(O[0]=255&d,O[1]=d>>>8&255,n.check=$(n.check,O,2,0)),d=0,c=0,n.mode=16184;case 16184:if(1024&n.flags){for(;c<16;){if(0===o)break t;o--,d+=i[r++]<<c,c+=8}n.length=d,n.head&&(n.head.extra_len=d),512&n.flags&&4&n.wrap&&(O[0]=255&d,O[1]=d>>>8&255,n.check=$(n.check,O,2,0)),d=0,c=0}else n.head&&(n.head.extra=null);n.mode=16185;case 16185:if(1024&n.flags&&((p=n.length)>o&&(p=o),p&&(n.head&&(x=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Uint8Array(n.head.extra_len)),n.head.extra.set(i.subarray(r,r+p),x)),512&n.flags&&4&n.wrap&&(n.check=$(n.check,i,p,r)),o-=p,r+=p,n.length-=p),n.length))break t;n.length=0,n.mode=16186;case 16186:if(2048&n.flags){if(0===o)break t;p=0;do x=i[r+p++],n.head&&x&&n.length<65536&&(n.head.name+=String.fromCharCode(x));while(x&&p<o)if(512&n.flags&&4&n.wrap&&(n.check=$(n.check,i,p,r)),o-=p,r+=p,x)break t}else n.head&&(n.head.name=null);n.length=0,n.mode=16187;case 16187:if(4096&n.flags){if(0===o)break t;p=0;do x=i[r+p++],n.head&&x&&n.length<65536&&(n.head.comment+=String.fromCharCode(x));while(x&&p<o)if(512&n.flags&&4&n.wrap&&(n.check=$(n.check,i,p,r)),o-=p,r+=p,x)break t}else n.head&&(n.head.comment=null);n.mode=16188;case 16188:if(512&n.flags){for(;c<16;){if(0===o)break t;o--,d+=i[r++]<<c,c+=8}if(4&n.wrap&&d!==(65535&n.check)){e.msg="header crc mismatch",n.mode=16209;break}d=0,c=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),e.adler=n.check=0,n.mode=16191;break;case 16189:for(;c<32;){if(0===o)break t;o--,d+=i[r++]<<c,c+=8}e.adler=n.check=th(d),d=0,c=0,n.mode=16190;case 16190:if(0===n.havedict)return e.next_out=a,e.avail_out=l,e.next_in=r,e.avail_in=o,n.hold=d,n.bits=c,tr;e.adler=n.check=1,n.mode=16191;case 16191:if(t===tt||t===tn)break t;case 16192:if(n.last){d>>>=7&c,c-=7&c,n.mode=16206;break}for(;c<3;){if(0===o)break t;o--,d+=i[r++]<<c,c+=8}switch(n.last=1&d,c-=1,3&(d>>>=1)){case 0:n.mode=16193;break;case 1:if(tm(n),n.mode=16199,t===tn){d>>>=2,c-=2;break t}break;case 2:n.mode=16196;break;case 3:e.msg="invalid block type",n.mode=16209}d>>>=2,c-=2;break;case 16193:for(d>>>=7&c,c-=7&c;c<32;){if(0===o)break t;o--,d+=i[r++]<<c,c+=8}if((65535&d)!=(d>>>16^65535)){e.msg="invalid stored block lengths",n.mode=16209;break}if(n.length=65535&d,d=0,c=0,n.mode=16194,t===tn)break t;case 16194:n.mode=16195;case 16195:if(p=n.length){if(p>o&&(p=o),p>l&&(p=l),0===p)break t;s.set(i.subarray(r,r+p),a),o-=p,r+=p,l-=p,a+=p,n.length-=p;break}n.mode=16191;break;case 16196:for(;c<14;){if(0===o)break t;o--,d+=i[r++]<<c,c+=8}if(n.nlen=(31&d)+257,c-=5,n.ndist=(31&(d>>>=5))+1,c-=5,n.ncode=(15&(d>>>=5))+4,d>>>=4,c-=4,n.nlen>286||n.ndist>30){e.msg="too many length or distance symbols",n.mode=16209;break}n.have=0,n.mode=16197;case 16197:for(;n.have<n.ncode;){for(;c<3;){if(0===o)break t;o--,d+=i[r++]<<c,c+=8}n.lens[A[n.have++]]=7&d,d>>>=3,c-=3}for(;n.have<19;)n.lens[A[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,k={bits:n.lenbits},S=e7(0,n.lens,0,19,n.lencode,0,n.work,k),n.lenbits=k.bits,S){e.msg="invalid code lengths set",n.mode=16209;break}n.have=0,n.mode=16198;case 16198:for(;n.have<n.nlen+n.ndist;){for(;m=(C=n.lencode[d&(1<<n.lenbits)-1])>>>24,w=C>>>16&255,b=65535&C,!(m<=c);){if(0===o)break t;o--,d+=i[r++]<<c,c+=8}if(b<16)d>>>=m,c-=m,n.lens[n.have++]=b;else{if(16===b){for(E=m+2;c<E;){if(0===o)break t;o--,d+=i[r++]<<c,c+=8}if(d>>>=m,c-=m,0===n.have){e.msg="invalid bit length repeat",n.mode=16209;break}x=n.lens[n.have-1],p=3+(3&d),d>>>=2,c-=2}else if(17===b){for(E=m+3;c<E;){if(0===o)break t;o--,d+=i[r++]<<c,c+=8}d>>>=m,c-=m,x=0,p=3+(7&d),d>>>=3,c-=3}else{for(E=m+7;c<E;){if(0===o)break t;o--,d+=i[r++]<<c,c+=8}d>>>=m,c-=m,x=0,p=11+(127&d),d>>>=7,c-=7}if(n.have+p>n.nlen+n.ndist){e.msg="invalid bit length repeat",n.mode=16209;break}for(;p--;)n.lens[n.have++]=x}}if(16209===n.mode)break;if(0===n.lens[256]){e.msg="invalid code -- missing end-of-block",n.mode=16209;break}if(n.lenbits=9,k={bits:n.lenbits},S=e7(1,n.lens,0,n.nlen,n.lencode,0,n.work,k),n.lenbits=k.bits,S){e.msg="invalid literal/lengths set",n.mode=16209;break}if(n.distbits=6,n.distcode=n.distdyn,k={bits:n.distbits},S=e7(2,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,k),n.distbits=k.bits,S){e.msg="invalid distances set",n.mode=16209;break}if(n.mode=16199,t===tn)break t;case 16199:n.mode=16200;case 16200:if(o>=6&&l>=258){e.next_out=a,e.avail_out=l,e.next_in=r,e.avail_in=o,n.hold=d,n.bits=c,e6(e,u),a=e.next_out,s=e.output,l=e.avail_out,r=e.next_in,i=e.input,o=e.avail_in,d=n.hold,c=n.bits,16191===n.mode&&(n.back=-1);break}for(n.back=0;m=(C=n.lencode[d&(1<<n.lenbits)-1])>>>24,w=C>>>16&255,b=65535&C,!(m<=c);){if(0===o)break t;o--,d+=i[r++]<<c,c+=8}if(w&&(240&w)==0){for(v=m,_=w,y=b;m=(C=n.lencode[y+((d&(1<<v+_)-1)>>v)])>>>24,w=C>>>16&255,b=65535&C,!(v+m<=c);){if(0===o)break t;o--,d+=i[r++]<<c,c+=8}d>>>=v,c-=v,n.back+=v}if(d>>>=m,c-=m,n.back+=m,n.length=b,0===w){n.mode=16205;break}if(32&w){n.back=-1,n.mode=16191;break}if(64&w){e.msg="invalid literal/length code",n.mode=16209;break}n.extra=15&w,n.mode=16201;case 16201:if(n.extra){for(E=n.extra;c<E;){if(0===o)break t;o--,d+=i[r++]<<c,c+=8}n.length+=d&(1<<n.extra)-1,d>>>=n.extra,c-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=16202;case 16202:for(;m=(C=n.distcode[d&(1<<n.distbits)-1])>>>24,w=C>>>16&255,b=65535&C,!(m<=c);){if(0===o)break t;o--,d+=i[r++]<<c,c+=8}if((240&w)==0){for(v=m,_=w,y=b;m=(C=n.distcode[y+((d&(1<<v+_)-1)>>v)])>>>24,w=C>>>16&255,b=65535&C,!(v+m<=c);){if(0===o)break t;o--,d+=i[r++]<<c,c+=8}d>>>=v,c-=v,n.back+=v}if(d>>>=m,c-=m,n.back+=m,64&w){e.msg="invalid distance code",n.mode=16209;break}n.offset=b,n.extra=15&w,n.mode=16203;case 16203:if(n.extra){for(E=n.extra;c<E;){if(0===o)break t;o--,d+=i[r++]<<c,c+=8}n.offset+=d&(1<<n.extra)-1,d>>>=n.extra,c-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){e.msg="invalid distance too far back",n.mode=16209;break}n.mode=16204;case 16204:if(0===l)break t;if(p=u-l,n.offset>p){if((p=n.offset-p)>n.whave&&n.sane){e.msg="invalid distance too far back",n.mode=16209;break}p>n.wnext?(p-=n.wnext,f=n.wsize-p):f=n.wnext-p,p>n.length&&(p=n.length),g=n.window}else g=s,f=a-n.offset,p=n.length;p>l&&(p=l),l-=p,n.length-=p;do s[a++]=g[f++];while(--p)0===n.length&&(n.mode=16200);break;case 16205:if(0===l)break t;s[a++]=n.length,l--,n.mode=16200;break;case 16206:if(n.wrap){for(;c<32;){if(0===o)break t;o--,d|=i[r++]<<c,c+=8}if(u-=l,e.total_out+=u,n.total+=u,4&n.wrap&&u&&(e.adler=n.check=n.flags?$(n.check,s,u,a-u):P(n.check,s,u,a-u)),u=l,4&n.wrap&&(n.flags?d:th(d))!==n.check){e.msg="incorrect data check",n.mode=16209;break}d=0,c=0}n.mode=16207;case 16207:if(n.wrap&&n.flags){for(;c<32;){if(0===o)break t;o--,d+=i[r++]<<c,c+=8}if(4&n.wrap&&d!==(0|n.total)){e.msg="incorrect length check",n.mode=16209;break}d=0,c=0}n.mode=16208;case 16208:S=ts;break t;case 16209:S=to;break t;case 16210:return tl;default:return ta}return e.next_out=a,e.avail_out=l,e.next_in=r,e.avail_in=o,n.hold=d,n.bits=c,(n.wsize||u!==e.avail_out&&n.mode<16209&&(n.mode<16206||t!==te))&&tw(e,e.output,e.next_out,u-e.avail_out),h-=e.avail_in,u-=e.avail_out,e.total_in+=h,e.total_out+=u,n.total+=u,4&n.wrap&&u&&(e.adler=n.check=n.flags?$(n.check,s,u,e.next_out-u):P(n.check,s,u,e.next_out-u)),e.data_type=n.bits+64*!!n.last+128*(16191===n.mode)+256*(16199===n.mode||16194===n.mode),(0===h&&0===u||t===te)&&S===ti&&(S=td),S},tv=e=>{if(tp(e))return ta;let t=e.state;return t.window&&(t.window=null),e.state=null,ti},t_=(e,t)=>{let n,i=t.length;return tp(e)||0!==(n=e.state).wrap&&16190!==n.mode?ta:16190===n.mode&&P(1,t,i,0)!==n.check?to:tw(e,t,i,i)?(n.mode=16210,tl):(n.havedict=1,ti)},ty=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1};let tx=Object.prototype.toString,{Z_NO_FLUSH:tS,Z_FINISH:tk,Z_OK:tE,Z_STREAM_END:tC,Z_NEED_DICT:tO,Z_STREAM_ERROR:tA,Z_DATA_ERROR:tI,Z_MEM_ERROR:tz}=H;function tD(e){this.options=eR({chunkSize:65536,windowBits:15,to:""},e||{});let t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,0===t.windowBits&&(t.windowBits=-15)),t.windowBits>=0&&t.windowBits<16&&!(e&&e.windowBits)&&(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&(15&t.windowBits)==0&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new eH,this.strm.avail_out=0;let n=((e,t)=>{if(!e)return ta;let n=new tu;e.state=n,n.strm=e,n.window=null,n.mode=16180;let i=((e,t)=>{let n;if(tp(e))return ta;let i=e.state;return(t<0?(n=0,t=-t):(n=(t>>4)+5,t<48&&(t&=15)),t&&(t<8||t>15))?ta:(null!==i.window&&i.wbits!==t&&(i.window=null),i.wrap=n,i.wbits=t,tf(e))})(e,t);return i!==ti&&(e.state=null),i})(this.strm,t.windowBits);if(n!==tE||(this.header=new ty,((e,t)=>{if(tp(e))return;let n=e.state;return(2&n.wrap)==0||(n.head=t,t.done=!1)})(this.strm,this.header),t.dictionary&&("string"==typeof t.dictionary?t.dictionary=eB(t.dictionary):"[object ArrayBuffer]"===tx.call(t.dictionary)&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw)&&(n=t_(this.strm,t.dictionary))!==tE))throw Error(Z[n])}function tN(e,t){let n=new tD(t);if(n.push(e),n.err)throw n.msg||Z[n.err];return n.result}tD.prototype.push=function(e,t){let n,i,s,r=this.strm,a=this.options.chunkSize,o=this.options.dictionary;if(this.ended)return!1;for(i=t===~~t?t:!0===t?tk:tS,"[object ArrayBuffer]"===tx.call(e)?r.input=new Uint8Array(e):r.input=e,r.next_in=0,r.avail_in=r.input.length;;){for(0===r.avail_out&&(r.output=new Uint8Array(a),r.next_out=0,r.avail_out=a),(n=tb(r,i))===tO&&o&&((n=t_(r,o))===tE?n=tb(r,i):n===tI&&(n=tO));r.avail_in>0&&n===tC&&r.state.wrap>0&&0!==e[r.next_in];)tf(r),n=tb(r,i);switch(n){case tA:case tI:case tO:case tz:return this.onEnd(n),this.ended=!0,!1}if(s=r.avail_out,r.next_out&&(0===r.avail_out||n===tC))if("string"===this.options.to){let e=eZ(r.output,r.next_out),t=r.next_out-e,n=e$(r.output,e);r.next_out=t,r.avail_out=a-t,t&&r.output.set(r.output.subarray(e,e+t),0),this.onData(n)}else this.onData(r.output.length===r.next_out?r.output:r.output.subarray(0,r.next_out));if(n!==tE||0!==s){if(n===tC)return n=tv(this.strm),this.onEnd(n),this.ended=!0,!0;if(0===r.avail_in)break}}return!0},tD.prototype.onData=function(e){this.chunks.push(e)},tD.prototype.onEnd=function(e){e===tE&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=eU(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};let{Deflate:tL,deflate:tM,deflateRaw:tT,gzip:tW}={Deflate:e2,deflate:e5,deflateRaw:function(e,t){return(t=t||{}).raw=!0,e5(e,t)},gzip:function(e,t){return(t=t||{}).gzip=!0,e5(e,t)},constants:H},{Inflate:tj,inflate:tR,inflateRaw:tU,ungzip:tF}={Inflate:tD,inflate:tN,inflateRaw:function(e,t){return(t=t||{}).raw=!0,tN(e,t)},ungzip:tN,constants:H},tP=window.history,tB=window.location,t$=window.localStorage,tZ=window.navigator,tH=new URL(tB),tV=tH.searchParams;function tq(e,t,n){return"function"==typeof n&&(e=e.toSorted(n),t=t.toSorted(n)),e.length===t.length&&e.every((e,n)=>t[n]===e)}function tK(e,t,n){return e.some(e=>tq(e,t,n))}function tY(...e){return e.join("-")}function tG(e){let t=Math.sign(e);return 0===t?"=":t>0?">":"<"}function tJ(e,t){return void 0===e?e:t(e)}function tX(e,t,n=0){return Math.floor(e()*(t-n+1)+n)}function tQ(){tB.assign(tH.search)}function t0(e){return e.split("").reverse().join("")}function t1(e,t){return Number(e)-Number(t)}async function t2(e){try{await tZ.clipboard.writeText(e)}catch(e){console.error("Could not write to clipboard.",e.message)}}let t5=window.console=window.console||{debug:function(){}},t6=t5.debug;function t3(e){t5.debug=e?t6:function(){}}t3(tV.has("debug"));let t8="direction",t4="east",t9="north",t7="south",ne="west",nt=Object.freeze({East:tY(t8,t4),North:tY(t8,t9),NorthEast:tY(t8,t9,t4),NorthWest:tY(t8,t9,ne),South:tY(t8,t7),SouthEast:tY(t8,t7,t4),SouthWest:tY(t8,t7,ne),West:tY(t8,ne)}),nn=Object.freeze([nt.NorthEast,nt.NorthWest,nt.SouthEast,nt.SouthWest]);class ni{column;id;row;#e;constructor(e,t){this.id=[e,t].join(","),this.row=Number(e),this.column=Number(t)}add(e){return new ni(this.row+e.row,this.column+e.column)}equals(e){return this.id===e?.id}getDirection(e){return this.getNeighbors().find(t=>t.coordinates.equals(e))?.direction}getNeighbors(){return this.#e||(this.#e=ni.getNeighbors(this)),this.#e}getNeighborsCrossing(e){let t=ni.Crossings[this.getDirection(e)]??[];return this.getNeighbors().filter(e=>t.includes(e.direction))}isNeighbor(e){return this.getNeighbors().some(t=>t.coordinates.equals(e))}toString(){return this.id}static getNeighbors(e){return ni.Neighbors.map(t=>new ni.Neighbor(e.add(t.coordinates),t.direction))}static Crossings=Object.freeze({[nt.NorthEast]:[nt.North,nt.East],[nt.NorthWest]:[nt.North,nt.West],[nt.SouthEast]:[nt.South,nt.East],[nt.SouthWest]:[nt.South,nt.West]});static Neighbor=class{coordinates;direction;isDirectionDiagonal;constructor(e,t){this.coordinates=e,this.direction=t,this.isDirectionDiagonal=nn.includes(t)}};static Neighbors=Object.freeze([new ni.Neighbor(new ni(0,1),nt.East),new ni.Neighbor(new ni(-1,0),nt.North),new ni.Neighbor(new ni(-1,1),nt.NorthEast),new ni.Neighbor(new ni(-1,-1),nt.NorthWest),new ni.Neighbor(new ni(1,0),nt.South),new ni.Neighbor(new ni(1,1),nt.SouthEast),new ni.Neighbor(new ni(1,-1),nt.SouthWest),new ni.Neighbor(new ni(0,-1),nt.West)])}let ns=0;class nr{name;value;constructor(e){this.name=e,this.value=1<<ns++}}class na{#t;constructor(...e){this.set(...e)}add(...e){return e.forEach(e=>{this.#t|=e.value}),this}get(){return this.#t}has(...e){return e.some(e=>(this.#t&e.value)>0)}remove(...e){return e.forEach(e=>{this.#t&=~e.value}),this}set(...e){return this.#t=0,e.forEach(e=>{"number"==typeof e?this.#t=e:e instanceof na?this.#t=e.get():e instanceof nr&&this.add(e)}),this}toString(e){return e.flatMap(e=>this.has(e)?[e.name]:[]).join(",")}}class no{#n=[];#i={context:void 0,element:document};constructor(e={},t=[]){this.#i=Object.assign(this.#i,e),this.add(t)}add(e={},t=[]){Array.isArray(e)&&(t=e,e={}),0!==t.length&&(this.#n=this.#n.concat(t.map(t=>{if((t=Object.assign({},this.#i,e,t)).type)Array.isArray(t.type)||(t.type=[t.type]);else throw Error("Event type is required");return t.context&&(Array.isArray(t.context)||(t.context=[t.context]),t.handler=t.handler.bind(...t.context)),t.type.forEach(e=>t.element.addEventListener(e,t.handler,t.options)),t})))}remove(){this.#n.forEach(e=>e.type.forEach(t=>e.element.removeEventListener(t,e.handler))),this.#n=[]}}let nl=document.getElementById("grid");class nd{#s=document.createElement("span");#r=document.createElement("div");#a;#o=new no({context:this,element:this.#r});#l;constructor(e,t){this.#a=e,this.#l=t,this.#o.add([{type:"pointerdown",handler:this.#d},{type:"pointerenter",handler:this.#d}]),this.#s.className="content";let n=document.createElement("div");n.classList.add("background"),n.append(this.#s),this.#r.append(n),this.update()}equals(e){return this.getIndex()===e.getIndex()}getContent(){return this.#l.content}getCoordinates(){return this.#a}getDirection(e){return this.getCoordinates().getDirection(e.getCoordinates())}getElement(){return this.#r}getFlags(){return this.#l.getFlags()}getIndex(){return this.#l.index}isConnected(e){return this.getFlags().has(nd.FlagsByName[this.getDirection(e)])}isNeighbor(e){return this.getCoordinates().isNeighbor(e?.getCoordinates())}reset(){this.update(e=>{let t=new na,n=e.getFlags();return nd.StickyFlags.filter(e=>n.has(e)).forEach(e=>t.add(e)),e.copy({flags:t})})}toString(){return`[${nd.Name}:${this.getCoordinates.toString()}]`}update(e){if(void 0!==e){if("function"==typeof e&&(e=e(this.#l)),!(e instanceof nd.State))throw Error("Cannot update cell state: value given is not of type Cell.State");this.#l=e}this.#r.className=nd.Name,this.#r.dataset.index=this.getIndex();let t=this.getFlags();return Object.values(nd.Flags).filter(e=>t.has(e)).forEach(e=>this.#r.classList.add(tY(nd.Name,e.name))),this.#s.textContent=this.#l.content,this.#l}#d(e){if("pointerdown"===e.type&&e.target.releasePointerCapture(e.pointerId),e.buttons>0){let t={cell:this,event:e};setTimeout(()=>nl.dispatchEvent(new CustomEvent(nd.Events.Select,{detail:t})))}}static Events=Object.freeze({Select:"cell-select"});static Flags=Object.freeze({Active:new nr("active"),DirectionEast:new nr(nt.East),DirectionNorth:new nr(nt.North),DirectionNorthEast:new nr(nt.NorthEast),DirectionNorthWest:new nr(nt.NorthWest),DirectionSouth:new nr(nt.South),DirectionSouthEast:new nr(nt.SouthEast),DirectionSouthWest:new nr(nt.SouthWest),DirectionWest:new nr(nt.West),First:new nr("first"),Hint:new nr("hint"),Last:new nr("last"),Path:new nr("path"),Revealed:new nr("revealed"),Selected:new nr("selected"),Swap:new nr("swap"),Swapped:new nr("swapped"),Validated:new nr("validated"),WordEnd:new nr("word-end"),WordStart:new nr("word-start")});static FlagsByName=Object.fromEntries(Object.values(nd.Flags).map(e=>[e.name,e]));static StickyFlags=Object.freeze([nd.Flags.Hint,nd.Flags.Swapped]);static Name="cell";static State=class{index;content;flags;#c;constructor(e,t,n=0){this.index=e,this.content=t,this.flags=n instanceof na?n.get():n}copy(e){return new nd.State(e.index??this.index,e.content??this.content,e.flags??this.flags)}getFlags(){return this.#c??(this.#c=new na(this.flags))}static fromObject(e){return new nd.State(e.index,e.content,e.flags)}}}class nc{encoding;getter;key;setter;constructor(e,t,n,i=[]){this.key=e,this.getter=t,this.setter=n,this.encoding=i}copy(e){return new nc(e.key??this.key,e.getter??this.getter,e.setter??this.setter,e.encoding??this.encoding)}decode(e){if(null!=e){var t,n;let i;return this.encoding.includes(nc.Encoders.Base64)&&(t=e,i=window.atob(((n=t)+"===".slice((n.length+3)%4)).replace(/-/g,"+").replace(/_/g,"/")),e=new TextDecoder().decode(tR(Uint8Array.from(i,e=>e.codePointAt(0))))),this.encoding.includes(nc.Encoders.Json)&&(e=JSON.parse(e)),e}}encode(e){if(null!=e){var t;return this.encoding.includes(nc.Encoders.Json)&&(e=JSON.stringify(e)),this.encoding.includes(nc.Encoders.Base64)&&(t=e,e=window.btoa(String.fromCodePoint(...tM(new TextEncoder().encode(t)))).replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")),e}}get(){return this.decode(this.getter(this.key))}set(e){return this.setter(this.key,this.encode(e))}static localStorage(e,t){return new nc(e,t$.getItem.bind(t$),t$.setItem.bind(t$),t)}static urlParams(e,t){return new nc(e,tV.get.bind(tV),tV.set.bind(tV),t)}static Encoders=Object.freeze({Base64:"base64",Json:"json"})}class nh{#h;#u;#t;constructor(e,t,n){if(n=Object.assign({encoding:[nc.Encoders.Json],overrides:[],persistence:!0},n),this.#h=nc.localStorage(e,n.encoding),this.#u=!1!==n.persistence,this.#t=structuredClone(t),this.#u)try{let t=this.#h.get();void 0!==t&&(console.debug(`Found local cache for key '${e}'.`,t),this.set(t))}catch(t){console.error(`Could not load cache for key '${e}': ${t.message}`)}(n.overrides??[]).forEach(e=>{try{let t=e.get();void 0!==t&&(console.debug(`Overriding local cache at key '${e.key}'.`,t),this.set(e.key,t))}catch(t){console.error(`Could not override local cache at key '${e.key}': ${t.message}`)}})}get(e){return structuredClone(void 0===e?this.#t:this.#t[e])}set(e,t){if(1==arguments.length&&(t=e,e=this.#h.key),void 0===t)return;let n=e===this.#h.key;return t=structuredClone(t),n?this.#t=t:this.#t[e]=t,this.#u&&this.#h.set(this.#t),this.get()}update(e){let t=this.get();return this.set(e(t)??t)}}class nu{character;frequency;points;weight;constructor(e){this.character=e,this.frequency=nu.frequencies[e],this.points=nu.pointTiers.reduce((e,t)=>e+ +(this.frequency<t),1);let t=nu.characters.slice(0,nu.characters.indexOf(e)+1);this.weight=t.reduce((e,t)=>e+nu.frequencies[t],0)}static frequencies=Object.freeze({a:.08167,b:.01492,c:.02782,d:.04253,e:.12702,f:.02228,g:.02015,h:.06094,i:.06966,j:.00153,k:.00772,l:.04025,m:.02406,n:.06749,o:.07507,p:.01929,q:95e-5,r:.05987,s:.06327,t:.09056,u:.02758,v:.00978,w:.0236,x:.0015,y:.01974,z:74e-5});static characters=Object.freeze(Object.keys(nu.frequencies));static pointTiers=[.1,.5,1,4,8].map(e=>e/100)}let np=Object.fromEntries(nu.characters.map(e=>[e,new nu(e)])),nf=Object.values(np),ng=document.getElementById("letter-points"),nm={};for(let e in nf.forEach(e=>(nm[e.points]??(nm[e.points]=[])).push(e)),nm){let t=document.createElement("li"),n=document.createElement("span");n.classList.add("points"),n.textContent=`${e} Point${e>1?"s":""}:`;let i=document.createElement("span");i.classList.add("letters"),i.textContent=nm[e].map(e=>e.character).join(", "),t.append(n,i),ng.append(t)}class nw{content;indexes=[];move;points;constructor(e,t,n){let i=[],s=[];t.forEach(e=>{let t=e.getContent();i.push(t);let r=np[t];e.getFlags().has(nd.Flags.Swapped)&&n.value.match!==nx.Match.Exact||s.push(r),this.indexes.push(e.getIndex())}),this.content=i.join(""),this.move=n;let r=Math.floor(s.length/nw.widthMultiplier(e));this.points=s.reduce((e,t)=>e+t.points,0)*r}static widthMultiplier(e){return Math.floor(e/2)}static minimumLength=3}class nb{sources={};words=[];async load(e){if(this.sources[e.name])return void console.debug(`Dictionary '${e.name}' has already been loaded.`);console.debug(`Loading dictionary '${e.name}' from URL: '${e.url}'`);try{let t=await fetch(e.url,{cache:"force-cache"}),n=await t.text(),i=this.words.length;this.words=Array.from(new Set(this.words.concat(n.split("\n").filter(e=>e.length>=nw.minimumLength))));let s=new nb.Range(i,this.words.length-1);this.sources[e.name]=e.withRange(s),console.debug(`Words loaded. New word count: ${this.words.length}`)}catch(t){console.error(`Could not load words for dictionary '${e.name}' from URL '${e.url}'`,t.message)}}getWords(e,t,n){let i=Array.from(this.words),s=0;n&&(i=i.filter(e=>e.length<=n)),console.debug(`getWords: ${t} characters with maximum word length of ${n}.`);let r=[];return function n(){let a=t-s-nw.minimumLength;a>=nw.minimumLength?i=i.filter(e=>e.length<=a):(a+=nw.minimumLength,i=i.filter(e=>e.length===a)),console.debug(`getWords ${r.length}: count = ${s}/${t}, maximumWordLength = ${a}, availableWords = ${i.length}`);let o=Math.floor(e()*i.length),l=i[o];return(i.splice(o,1),console.debug(`getWords picked word '${l}' at index ${o}.`),r.push(l),(s+=l.length)===t)?(!function(e,t){for(let n=t.length-1;n>0;n--){let i=Math.floor(e()*(n+1)),s=t[n];t[n]=t[i],t[i]=s}}(e,r),console.debug(`getWords result: ${r.join(", ")}`),r):n()}()}getSource(e){let t=this.words.indexOf(e);if(!(t<0)){for(let e in this.sources)if(this.sources[e]?.range.contains(t))return e}}isValid(e){return e.length>=nw.minimumLength&&this.words.includes(e)}unload(e){let t=this.sources[e];if(!t)return void console.warn(`Dictionary '${e}' has not been loaded.`);for(let e in console.debug(`Unloading dictionary '${t.name}'. Current word count: ${this.words.length}`),t.range.extract(this.words),delete this.sources[t.name],this.sources){let n=this.sources[e];if(n.range.startIndex>t.range.startIndex){let i=n.range.offset(-t.range.count);console.debug(`Updating range for dictionary '${n.name}' from (${n.range.toString()}) to (${i.toString()}).`),this.sources[e]=n.withRange(i)}}console.debug(`Words unloaded. New word count: ${this.words.length}`)}static Range=class{endIndex;count;startIndex;constructor(e,t){this.startIndex=e,this.endIndex=t,this.count=t-e+1}contains(e){return e>=this.startIndex&&e<=this.endIndex}extract(e){e.splice(this.startIndex,this.count)}offset(e){return new nb.Range(this.startIndex+e,this.endIndex+e)}toString(){return[this.startIndex,this.endIndex].join(",")}};static Source=class{name;range;url;constructor(e,t,n){this.name=e,this.url=t,this.range=n}withRange(e){return new nb.Source(this.name,this.url,e)}};static BaseUrl="https://raw.githubusercontent.com/kflorence/word-list/";static Names=Object.freeze({Default:"default",Profanity:"profanity"});static Sources=Object.freeze({Default:new nb.Source(nb.Names.Default,`${nb.BaseUrl}/d00c2d094a4a4c68da1722eec3e83cd5078af771/words.txt`),Profanity:new nb.Source(nb.Names.Profanity,`${nb.BaseUrl}/d00c2d094a4a4c68da1722eec3e83cd5078af771/words-profanity.txt`)});static SourcesByName=Object.freeze(Object.fromEntries(Object.entries(nb.Names).map(([e,t])=>[t,nb.Sources[e]])))}class nv{characters;configuration;dictionary;rand;wordBoundaries;words;#p={};#f;#g=[];#m;#w=0;#b;constructor(e,t){var n;this.rand=(n=e.hash,function(){n|=0;let e=(n=n+0x9e3779b9|0)^n>>>16;return e=Math.imul(e,0x21f0aaad),e^=e>>>15,(((e=Math.imul(e,0x735a2d97))^e>>>15)>>>0)/0x100000000}),this.words=t.getWords(this.rand,e.size,Math.ceil(e.width+e.width/2));let i=Array.from(this.words),s=i.reduce((e,t)=>e.concat(t.split("")),[]);if(e.mode===nx.Modes.Challenge){let e=tX(this.rand,Math.floor(i.length/2));console.debug(`Reversing ${e} words.`),(function(e,t,n){let i=Object.keys(t);n>i.length&&(n=i.length);let s=[];for(;n>0;n--)s.push(Number(i.splice(tX(e,i.length-1),1)[0]));return s})(this.rand,i,e).forEach(e=>{i[e]=t0(i[e])})}this.characters=s,this.configuration=e,this.dictionary=t,this.wordBoundaries=nv.getWordBoundaries(this.words),this.#m=Array(e.size),this.#b=e.size*e.width,this.#f=this.#b*e.size}generate(){for(;this.#g.length<this.configuration.size;)this.#v();let e=this.#m.map(e=>e.state),t=this.#g.map(e=>e.index),n=this.wordBoundaries.map(e=>e.map(e=>t[e]));return console.debug("Done.",t),new nx.State.Configuration(e,t,this.words,n)}#_(){return[...this.#m].flatMap((e,t)=>void 0===e?[t]:[])}#y(e){let t=[],n=[],i={};function s(e){i[e]=!0,n.push(e)}for(s(e[e.length-1]);n.length>0;){let r=function(){let i=n.pop();return t.push(i),e.splice(e.indexOf(i),1),i}(),a=this.configuration.getCoordinates(r),o=e.filter(e=>!i[e]);o.length&&this.#x(a,o).forEach(e=>s(this.configuration.getIndex(e.coordinates)))}return t.sort((e,t)=>e-t)}#S(e){let t=[],n=Array.from(e);for(;n.length>0;)t.push(this.#y(n));return t}#x(e,t){return t.length?e.getNeighbors().filter(n=>{if(!this.configuration.isValid(n.coordinates))return!1;let i=this.configuration.getIndex(n.coordinates);if(t&&!t.includes(i))return!1;if(n.isDirectionDiagonal){let[t,i]=n.coordinates.getNeighborsCrossing(e).map(e=>{let t=this.configuration.getIndex(e.coordinates);return this.#m[t]});if(t?.isConnected(i))return!1}return!0}):[]}#v(){this.#w++;let e=this.#g.length,t=this.configuration.size-e;if(console.debug(`Steps remaining: ${t}. Total tries: ${this.#w}`),this.#w>this.#f)throw Error(`Too many tries: ${this.#w}. Stopping.`);this.#w%this.#b==0&&(console.debug("Exhausted tries on current path. Starting over."),this.#k());let n=this.#_(),i=this.#g[e-1];if(!i){let e=tX(this.rand,n.length-1);this.#E(n[e]);return}let s=n.filter(e=>!this.#p[n_.key(i.key,e)]),r=t-1,a=this.#x(i.coordinates,s).filter(e=>{let t=this.configuration.getIndex(e.coordinates),i=n.filter(e=>e!==t),s=this.#S(i);return(console.debug("Found groups",s,"for neighbor",e,"with available indexes",i),s.length>1)?(console.debug("Excluding neighbor: multiple groups",e),!1):1!==s.length||!(s[0].length<r)||(console.debug("Excluding neighbor: group is too small",e),!1)});if(!a.length)return console.debug("No valid steps from here. Removing last step and trying again."),this.#C();let o=tX(this.rand,a.length-1);this.#E(this.configuration.getIndex(a[o].coordinates),i)}#E(e,t){let n=this.configuration.getCoordinates(e),i=this.characters[this.#g.length],s=new n_(new nd.State(e,i),n,t);this.#m[e]=s,this.#g.push(s),console.debug("Added step:",s)}#C(){let e=this.#g.pop(),t=e.index;delete this.#m[t],this.#p[e.key]=!0,console.debug("Removed step:",e)}#k(){for(;this.#g.length>0;)this.#C();for(let e in this.#p)this.#p[e]={}}static getWordBoundaries(e){return e.reduce((e,t)=>{let n=e[e.length-1],i=n?n[n.length-1]+1:0;return e.push([...t.split("").map((e,t)=>i+t)]),e},[])}}class n_{coordinates;index;key;parent;state;constructor(e,t,n){this.coordinates=t,this.index=e.index,this.key=n?n_.key(n.key,this.index):this.index.toString(),this.parent=n,this.state=e}equals(e){return this.index===e?.index}isConnected(e){return!0===(this.parent?.equals(e)||e?.parent?.equals(this))}static key(...e){return e.join(".")}}let ny=document.getElementById("grid");class nx{#O;#A=[];#I;#z;#o=new no({context:this,element:ny});#D=-1;#N=[];#L;#l;constructor(e,t,n){this.#I=new nx.Configuration(nx.getId(),t,n),this.#z=e;let i=nx.getSolution(this.#I.hash),s=void 0===i,r=new nx.State(void 0,i,new nx.State.User,nx.State.Version);this.#l=new nh(this.#I.hash,r,{persistence:s});let a=this.getState();a.version<nx.State.Version&&(console.warn(`Ignoring stale cache with version ${a.version}. Current version: ${nx.State.Version}`),this.#l.set(r)),tV.has("reset")&&(console.debug(`Resetting solution for path '${this.#I.id}'.`),this.#M(),tV.delete("reset"),tP.replaceState(tP.state,"reset",tH)),document.body.classList.add(tY(nx.Name,"mode",this.#I.mode)),ny.dataset.width=this.#I.width,this.#o.add([{type:nd.Events.Select,handler:this.#d},{type:"pointerup",element:document,handler:this.#T}])}getConfiguration(){return this.#I}getMoves(){return this.getState().solution.moves}getSelection(){let e=Array.from(this.#N);if(!e.length)return new nx.Selection(e);let t=nx.getIndexes(e),n=this.#W();if(n){let e=this.#j(n);e<0?(console.debug("Unable to anchor selection to existing path."),t.splice(0)):0!==e?(console.debug("Anchoring selection at end."),t.reverse()):console.debug("Anchoring selection at beginning.")}let i=nx.getContent(e),s=!1;if(t.length&&!(s=this.#z.isValid(i))){let t=t0(i);(s=this.#z.isValid(t))&&(e.reverse(),i=t)}let r=this.getState(),a=nx.getIndexes(e),o=r.getHiddenWordIndex(),l=r.configuration.wordIndexes[o]??[],d=a.filter(e=>l.includes(e)).filter(e=>!r.solution.hints.includes(e)),c=s&&(this.#I.mode===nx.Modes.Challenge?r.configuration.words.includes(i):s&&r.configuration.words[o]===i&&tq(l,a,t1)),h=n?t.concat([n.getIndex()]):t;if(s&&this.#I.mode===nx.Modes.Pathfinder){let e=l.every(e=>!r.solution.hints.includes(e)||a.includes(e)),n=r.solution.moves.filter(e=>e.type===nx.Move.Types.Spell&&e.value.hiddenWordIndex===o).map(e=>e.value.index),i=r.solution.words.filter((e,t)=>n.includes(t));(s=e&&!tK(i,a))&&c&&(t=Array.from(l))}return new nx.Selection(e,i,t,d,h,a,o,l,c,s)}getState(){return nx.State.fromObject(this.#l.get())}getStatistics(e){return e??=this.getState(),new nx.Statistics(this.#I,e,this.getWords(e))}getSwaps(){let e=this.getState();return e.solution.swaps.map(t=>t.map(t=>{let n=this.#A[t],i=e.configuration.cells[t].content,s=n.getCoordinates().toString();return`${i} (${s})`}))}getWords(e){return(e??=this.getState()).solution.words.map((t,n)=>{let i=e.solution.moves.find(e=>e.type===nx.Move.Types.Spell&&e.value.index===n);return new nw(this.#I.width,t.map(e=>this.#A[e]),i)})}hasHint(e){return void 0!==this.#R(e??this.getState())}hint(){if(this.#I.mode===nx.Modes.Challenge)return;let e=this.getState(),t=this.#R(e);void 0!==t&&(e.solution.hints.push(t),e.solution.moves.push(new nx.Move(nx.Move.Types.Hint,t)),this.#U(e),this.#F([t]))}#R(e){return e.configuration.wordIndexes[e.getHiddenWordIndex()]?.find(t=>!e.solution.hints.includes(t))}removeSwap(e){let t=this.getState(),n=t.solution.swaps.splice(e,1)[0],i=t.solution.moves.findIndex(t=>t.type===nx.Move.Types.Swap&&t.value===e);t.solution.moves.splice(i,1),this.#U(t);let s=t.solution.words.findIndex(e=>n.some(t=>e.indexOf(t)>=0));s>=0&&this.removeWord(s),this.#F(n)}removeWord(e){let t=this.getState(),n=t.solution.words.splice(e)[0],i=t.solution.path.findIndex(e=>n.indexOf(e)>=0),s=t.solution.path.splice(i);t.solution.sources.splice(e),t.solution.moves=t.solution.moves.filter(t=>!(t.type===nx.Move.Types.Spell&&t.value.index>=e)),this.#U(t);let r=t.solution.path[t.solution.path.length-1];void 0!==r&&s.push(r),this.#F(s)}reset(){this.#M(),this.#F(nx.getIndexes(this.#A))}setup(){let e=this.#l.get(nx.State.Keys.Configuration);e||(e=new nv(this.#I,this.#z).generate(),this.#l.set(nx.State.Keys.Configuration,e)),this.#l.get(nx.State.Keys.Solution)||this.#M(),this.#A=e.cells.map(e=>new nd(this.#I.getCoordinates(e.index),nd.State.fromObject(e))),this.#F(nx.getIndexes(this.#A)),ny.replaceChildren(...this.#A.map(e=>e.getElement())),ny.classList.remove(nx.ClassNames.Loading)}undo(){if(this.#N.length)return void this.#P(this.#N.splice(0));let e=this.getState().solution.moves.filter(e=>e.type!==nx.Move.Types.Hint);if(0===e.length)return;let t=e[e.length-1];switch(t.type){case nx.Move.Types.Spell:this.removeWord(t.value.index);break;case nx.Move.Types.Swap:this.removeSwap(t.value)}}#B(e){this.#$(),e.update(e=>e.copy({flags:e.getFlags().add(nd.Flags.Active)})),this.#O=e}#Z(e){let t=this.#N[this.#j(e)];if(t){let n=e.getDirection(t);e.update(e=>e.copy({flags:e.getFlags().add(nd.FlagsByName[n])}))}}#$(){this.#O&&(this.#O.update(e=>e.copy({flags:e.getFlags().remove(nd.Flags.Active)})),this.#O=void 0)}#P(e){e.forEach(e=>e.reset());let t=this.#W();t&&this.#F([t.getIndex()]),this.#H(nx.Events.Selection)}#H(e,t=null){let n=new CustomEvent(e,{detail:t});setTimeout(()=>document.dispatchEvent(n))}#W(){let e=this.getState().solution.path;return this.#A[e[e.length-1]]}#j(e){if(0===this.#N.length||!(e??=this.#W()))return;let t=[0],n=this.#N.length-1;return 0!==n&&t.push(n),t.find(t=>{let n=this.#N[t];return!n.getFlags().has(nd.Flags.Swap)&&this.#V(e,n)})??-1}#q(e,t){let[n,i]=e.getCoordinates().getNeighborsCrossing(t.getCoordinates()).map(e=>this.#A[this.#I.getIndex(e.coordinates)]);return n?.isConnected(i)||i?.isConnected(n)||!1}#V(e,t){return e?.isNeighbor(t)&&!this.#q(e,t)}#T(e){if(this.#$(),!this.#L){e.target.closest("#grid")||e.target.closest("#undo")||this.#P(this.#N.splice(0));return}let t=this.#N.length;t-this.#L.length>1?this.#K():2===t&&this.#N[t-1].getFlags().has(nd.Flags.Swap)&&this.#Y(...this.#N.splice(0)),this.#L=void 0}#d(e){if(!this.#L&&"pointerdown"!==e.detail.event.type)return void console.debug("Ignoring cell events prior to pointerdown.");let t=e.detail.cell;if(this.#B(t),t.getFlags().has(nd.Flags.Validated))return;let n=void 0!==this.#L;if(n){if(0===this.#N.length)return void console.debug("SelectMultiple: Selection was cleared during multi-select. Wait for pointerup before continuing.")}else this.#L=new nx.SelectionStart(e,this.#N.length);let i=[],s=this.#N[this.#N.length-1],r=this.#N.findIndex(e=>e.equals(t));if(s?.getFlags().has(nd.Flags.Swap))this.#G(t,s,i,r,n);else{let e=t.isNeighbor(s),a=this.#V(s,t);n?this.#J(t,s,i,r,a):this.#X(t,s,i,r,e,a)}i.includes(nd.Flags.Path)&&i.push(nd.FlagsByName[t.getDirection(s)],nd.Flags.Selected);let a=this.#W();a&&(this.#F([a.getIndex()]),this.#N.length&&!i.includes(nd.Flags.Swap)&&this.#Z(a)),i.length&&(t.update(e=>e.copy({flags:e.getFlags().add(...i)})),this.#H(nx.Events.Selection))}#J(e,t,n,i,s){i>=0?(console.debug("SelectMultiple: Re-selecting a previously selected cell. De-select everything after it."),this.#P(this.#N.splice(i+1))):s?(console.debug("SelectMultiple: A valid new cell has been selected."),this.#N.push(e),n.push(nd.Flags.Path)):console.debug("SelectMultiple: Invalid cell selected. Ignoring.")}#X(e,t,n,i,s,r){if(i>=0)if(this.#I.mode!==nx.Modes.Challenge||1!==this.#N.length||e.getFlags().has(nd.Flags.Swapped)){let e=this.#N.length-1;this.#N.length>=nw.minimumLength&&i===e?(console.debug("SelectSingle: Submitting selection for validation."),this.#K()):(console.debug("SelectSingle: Re-selecting a previously selected cell. De-select everything after it."),this.#P(this.#N.splice(i+1)))}else console.debug("SelectSingle: A non-swapped selected cell has been re-tapped. Mark for swap."),n.push(nd.Flags.Swap);else s?r?(console.debug("SelectSingle: A valid new cell has been selected."),this.#N.push(e),n.push(nd.Flags.Path)):console.debug("SelectSingle: Invalid cell selected. Ignoring."):(this.#N.length&&(console.debug("SelectSingle: A non-neighboring cell has been selected. De-select everything else."),this.#P(this.#N.splice(0))),this.#N.push(e),n.push(nd.Flags.Selected))}#G(e,t,n,i,s){s?(console.debug("Swap: Multiple target cells selected. De-selecting everything except source cell."),this.#P(this.#N.splice(1))):e.getFlags().has(nd.Flags.Swap,nd.Flags.Swapped)||e.getContent()===t.getContent()?(console.debug("Swap: Invalid target cell selected. Cancelling swap."),this.#P(this.#N.splice(0))):e.getFlags().has(nd.Flags.Swapped)||(console.debug("Swap: Valid target cell selected. Initiating swap."),n.push(nd.Flags.Swap),this.#N.push(e))}#M(){this.#l.update(e=>{let t=this.#I.hash,n=this.#I.mode===nx.Modes.Pathfinder?[e.configuration.path[0]]:[];e.solution=nx.State.Solution.fromObject({hash:t,hints:n})})}#U(e){this.#l.set(e),tV.has(nx.Params.Solution.key)&&nx.Params.Solution.set(e.solution)}#Y(e,t){let n=this.getState(),i=[e.getIndex(),t.getIndex()];n.solution.swaps.push(i),n.solution.moves.push(new nx.Move(nx.Move.Types.Swap,n.solution.swaps.length-1)),this.#U(n),this.#F(i)}#F(e){let t=this.getState(),n=t.configuration.cells,i=t.solution.hints,s=t.solution.path,r=t.solution.swaps,a=this.#I.mode===nx.Modes.Pathfinder?t.configuration.wordIndexes:t.solution.words,o=s.length-1;e.forEach(e=>{let l=this.#A[e],d=n[e].content,c=new na,h=i.indexOf(e);h>=0&&(c.add(nd.Flags.Hint),0===h&&c.add(nd.Flags.First));let u=r.find(t=>t.includes(e));u&&(c.add(nd.Flags.Swapped),d=n[0===u.indexOf(e)?u[1]:u[0]].content);let p=s.indexOf(e);if(p>=0){c.add(nd.Flags.Path);let n=s[p+1];if(void 0!==n){let e=this.#A[n];c.add(nd.FlagsByName[l.getDirection(e)])}0===p&&c.add(nd.Flags.First),p===o&&(o!==this.#D&&this.#D>=0&&this.#A[this.#D].update(e=>e.copy({flags:e.getFlags().remove(nd.Flags.Last)})),c.add(nd.Flags.Last));let i=a.find(t=>t.includes(e));if(i){c.add(nd.Flags.Validated);let n=i.length-1,r=s.indexOf(i[0])>s.indexOf(i[n])?Array.from(i).reverse():i,a=r.indexOf(e);tK(t.configuration.wordIndexes,r,t1)&&c.add(nd.Flags.Revealed),0===a?c.add(nd.Flags.WordStart):a===n&&c.add(nd.Flags.WordEnd)}}l.update(e=>e.copy({content:d,flags:c}))}),this.#D=o;let l=this.getStatistics(t);l.score>t.user.highScore&&(t.user.highScore=l.score,this.#U(t)),this.#H(nx.Events.Update)}#K(){let e=this.getSelection();if(this.#P(this.#N.splice(0)),!e.pathIndexes.length||!e.isValidWord)return;let t=this.getState();t.solution.sources.push(this.#z.getSource(e.content)),t.solution.words.push(e.wordIndexes);let n=t.solution.words.length-1,i=e.match,s=e.hiddenWordIndex;switch(t.solution.moves.push(new nx.Move(nx.Move.Types.Spell,{index:n,match:i,hiddenWordIndex:s})),this.#I.mode){case nx.Modes.Challenge:t.solution.path.push(...e.pathIndexes);break;case nx.Modes.Pathfinder:e.isHiddenWord?t.solution.path.push(...e.pathIndexes):e.hintIndexes.length&&t.solution.hints.push(...e.hintIndexes);break;default:throw Error(`Unsupported mode: ${this.#I.mode}.`)}this.#U(t),this.#F(e.updateIndexes)}static getContent(e){return e.map(e=>e.getContent()).join("")}static getIndexes(e){return e.map(e=>e.getIndex())}static getId(){let e=nx.Params.Id.get();return void 0===e||nx.DateRegex.test(e)&&Date.parse(e)>nx.Today?nx.DefaultId:e}static getMode(){let e=nx.Params.Mode.get();return Object.values(nx.Modes).includes(e)?e:nx.DefaultMode}static getSolution(e){let t=nx.Params.Solution.get();if(t?.hash===e)return t}static getWidth(){let e=Number(nx.Params.Width.get());return nx.Widths.includes(e)?e:nx.DefaultWidth}static Name="grid";static ClassNames=Object.freeze({Loading:tY(nx.Name,"loading")});static DateRegex=/^\d{4}-\d{2}-\d{2}$/;static DefaultId=(()=>{let e=new Date,t=e.getFullYear(),n=(e.getMonth()+1).toString().padStart(2,"0"),i=e.getDate().toString().padStart(2,"0");return`${t}-${n}-${i}`})();static Events=Object.freeze({Selection:tY(nx.Name,"selection"),Update:tY(nx.Name,"update")});static Match=Object.freeze({Exact:"exact",None:"none",Partial:"partial"});static Modes=Object.freeze({Challenge:"challenge",Pathfinder:"pathfinder"});static Params=Object.freeze({Id:nc.urlParams("id"),Mode:nc.urlParams("mode"),Solution:new nc("solution",tV.get.bind(tV),(e,t)=>{tV.set(e,t),tP.pushState({[e]:t},"",tH)},[nc.Encoders.Base64,nc.Encoders.Json]),Width:nc.urlParams("width")});static Today=Date.parse(nx.DefaultId);static Widths=Object.freeze([5,7,9]);static DefaultMode=nx.Modes.Challenge;static DefaultWidth=nx.Widths[0];static SelectionStart=class{event;length;constructor(e,t){this.event=e,this.length=t}};static Configuration=class{hash;id;maxColumn;maxRow;mode;seed;size;width;constructor(e,t,n,i){this.id=e??nx.getId(),this.mode=n??nx.getMode(),this.width=t??nx.getWidth(),this.maxColumn=this.maxRow=this.width-1,this.size=this.width*this.width,this.seed=[this.mode,this.width,this.id].join(":"),this.hash=i??function(e,t=0){let n=0xdeadbeef^t,i=0x41c6ce57^t;for(let t=0,s;t<e.length;t++)n=Math.imul(n^(s=e.charCodeAt(t)),0x9e3779b1),i=Math.imul(i^s,0x5f356495);return n=Math.imul(n^n>>>16,0x85ebca6b)^Math.imul(i^i>>>13,0xc2b2ae35),0x100000000*(2097151&(i=Math.imul(i^i>>>16,0x85ebca6b)^Math.imul(n^n>>>13,0xc2b2ae35)))+(n>>>0)}(this.seed)}getCoordinates(e){return new ni(this.getRow(e),this.getColumn(e),this.width)}getColumn(e){return e%this.width}getIndex(e){return e.row*this.width+e.column}getRow(e){return Math.floor(e/this.width)}isValid(e){return e.column>=0&&e.column<=this.maxColumn&&e.row>=0&&e.row<=this.maxRow}};static Move=class{type;value;constructor(e,t){this.type=e,this.value=t}getSymbol(e){let t;switch(this.type){case nx.Move.Types.Hint:t=nx.Move.Symbols.LightBulb;break;case nx.Move.Types.Spell:t=nx.Move.Symbols.CircleGreen,e===nx.Modes.Challenge&&this.value.match===nx.Match.Exact?t=nx.Move.Symbols.CircleYellow:e===nx.Modes.Pathfinder&&(this.value.match===nx.Match.Partial?t=nx.Move.Symbols.CircleYellow:this.value.match===nx.Match.None&&(t=nx.Move.Symbols.CircleWhite));break;case nx.Move.Types.Swap:t=nx.Move.Symbols.CirclePurple}return t}static fromObject(e){return new nx.Move(e.type,e.value)}static Types=Object.freeze({Hint:"hint",Spell:"spell",Swap:"swap"});static Symbols=Object.freeze({CircleGreen:"",CirclePurple:"",CircleWhite:"",CircleYellow:"",LightBulb:""})};static Selection=class{cells;content;hintIndexes;isHiddenWord;isValidWord;match;pathIndexes;hiddenWordIndex;hiddenWordIndexes;updateIndexes;wordIndexes;constructor(e,t,n,i,s,r,a,o,l,d){this.cells=e,this.content=t,this.pathIndexes=n??[],this.hintIndexes=i??[],this.updateIndexes=s??[],this.wordIndexes=r??[],this.hiddenWordIndex=a??-1,this.hiddenWordIndexes=o,this.isHiddenWord=l??!1,this.isValidWord=d??!1,this.match=this.isHiddenWord?nx.Match.Exact:this.hintIndexes.length?nx.Match.Partial:nx.Match.None}};static State=class{configuration;solution;user;version;constructor(e,t,n,i){this.configuration=e,this.solution=t,this.user=n,this.version=i??0}getRemainingPathIndexes(){return this.configuration.path.slice(this.solution.path.length)}getHiddenWordIndex(e){return e??=this.configuration.path[this.solution.path.length],this.configuration.wordIndexes.findIndex(t=>t.includes(e))}getSources(){return Array.from(new Set([nb.Names.Default].concat(this.solution.sources))).sort()}static fromObject(e){return new nx.State(tJ(e.configuration,nx.State.Configuration.fromObject),tJ(e.solution,nx.State.Solution.fromObject),tJ(e.user,nx.State.User.fromObject),e.version)}static Version=2;static Configuration=class{cells;path;wordIndexes;words;constructor(e,t,n,i){this.cells=e,this.path=t,this.words=n,this.wordIndexes=i}static fromObject(e){return new nx.State.Configuration(e.cells,e.path,e.words,e.wordIndexes)}};static Solution=class{hash;moves;path;hints;sources;swaps;words;constructor(e,t,n,i,s,r,a){this.hash=e,this.hints=i??[],this.path=t??[],this.moves=n??[],this.swaps=s??[],this.words=r??[],this.sources=a??[]}static fromObject(e){return new nx.State.Solution(e.hash,e.path,tJ(e.moves,e=>e.map(e=>nx.Move.fromObject(e))),e.hints,e.swaps,e.words,e.sources)}};static User=class{highScore;constructor(e){this.highScore=e??0}static fromObject(e){return new nx.State.User(e.highScore)}};static Keys=Object.freeze({Configuration:"configuration",Solution:"solution",User:"user"})};static Statistics=class{averageWordLength;best;bestDiff;hiddenWordCount;hiddenWordsGuessed;moves;progress;score;swapCount;wordCount;constructor(e,t,n){let{size:i}=e,{length:s,points:r}=n.reduce((e,t)=>({length:e.length+t.content.length,points:e.points+t.points}),{length:0,points:0}),a=r+(s===i?i:0),o=t.user.highScore-a;this.averageWordLength=0===s?0:(s/n.length).toPrecision(2),this.best=t.user.highScore,this.bestDiff=0===o?"=":o<0?o:`+${o}`,this.hiddenWordCount=t.configuration.words.length,this.hiddenWordsGuessed=t.configuration.words.filter(e=>n.some(t=>t.content===e)).length,this.moves=t.solution.moves,this.progress=Math.trunc(t.solution.path.length/i*100),this.score=a,this.swapCount=t.solution.swaps.length,this.wordCount=n.length}}}let nS=document.getElementById("grid-size-multipliers");function nk(e){return e?(e.nodeName||"").toLowerCase():null}function nE(e){if(null==e)return window;if("[object Window]"!==e.toString()){var t=e.ownerDocument;return t&&t.defaultView||window}return e}function nC(e){var t=nE(e).Element;return e instanceof t||e instanceof Element}function nO(e){var t=nE(e).HTMLElement;return e instanceof t||e instanceof HTMLElement}function nA(e){if("undefined"==typeof ShadowRoot)return!1;var t=nE(e).ShadowRoot;return e instanceof t||e instanceof ShadowRoot}nx.Widths.forEach(e=>{let t=document.createElement("li");t.textContent=`${e}x${e} = ${nw.widthMultiplier(e)}`,nS.append(t)});var nI={name:"applyStyles",enabled:!0,phase:"write",fn:function(e){var t=e.state;Object.keys(t.elements).forEach(function(e){var n=t.styles[e]||{},i=t.attributes[e]||{},s=t.elements[e];nO(s)&&nk(s)&&(Object.assign(s.style,n),Object.keys(i).forEach(function(e){var t=i[e];!1===t?s.removeAttribute(e):s.setAttribute(e,!0===t?"":t)}))})},effect:function(e){var t=e.state,n={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,n.popper),t.styles=n,t.elements.arrow&&Object.assign(t.elements.arrow.style,n.arrow),function(){Object.keys(t.elements).forEach(function(e){var i=t.elements[e],s=t.attributes[e]||{},r=Object.keys(t.styles.hasOwnProperty(e)?t.styles[e]:n[e]).reduce(function(e,t){return e[t]="",e},{});nO(i)&&nk(i)&&(Object.assign(i.style,r),Object.keys(s).forEach(function(e){i.removeAttribute(e)}))})}},requires:["computeStyles"]},nz=Math.max,nD=Math.min,nN=Math.round;function nL(){var e=navigator.userAgentData;return null!=e&&e.brands&&Array.isArray(e.brands)?e.brands.map(function(e){return e.brand+"/"+e.version}).join(" "):navigator.userAgent}function nM(){return!/^((?!chrome|android).)*safari/i.test(nL())}function nT(e,t,n){void 0===t&&(t=!1),void 0===n&&(n=!1);var i=e.getBoundingClientRect(),s=1,r=1;t&&nO(e)&&(s=e.offsetWidth>0&&nN(i.width)/e.offsetWidth||1,r=e.offsetHeight>0&&nN(i.height)/e.offsetHeight||1);var a=(nC(e)?nE(e):window).visualViewport,o=!nM()&&n,l=(i.left+(o&&a?a.offsetLeft:0))/s,d=(i.top+(o&&a?a.offsetTop:0))/r,c=i.width/s,h=i.height/r;return{width:c,height:h,top:d,right:l+c,bottom:d+h,left:l,x:l,y:d}}function nW(e){var t=nE(e);return{scrollLeft:t.pageXOffset,scrollTop:t.pageYOffset}}function nj(e){return((nC(e)?e.ownerDocument:e.document)||window.document).documentElement}function nR(e){return nT(nj(e)).left+nW(e).scrollLeft}function nU(e){return nE(e).getComputedStyle(e)}function nF(e){var t=nU(e),n=t.overflow,i=t.overflowX,s=t.overflowY;return/auto|scroll|overlay|hidden/.test(n+s+i)}function nP(e){var t=nT(e),n=e.offsetWidth,i=e.offsetHeight;return 1>=Math.abs(t.width-n)&&(n=t.width),1>=Math.abs(t.height-i)&&(i=t.height),{x:e.offsetLeft,y:e.offsetTop,width:n,height:i}}function nB(e){return"html"===nk(e)?e:e.assignedSlot||e.parentNode||(nA(e)?e.host:null)||nj(e)}function n$(e,t){void 0===t&&(t=[]);var n,i=function e(t){return["html","body","#document"].indexOf(nk(t))>=0?t.ownerDocument.body:nO(t)&&nF(t)?t:e(nB(t))}(e),s=i===(null==(n=e.ownerDocument)?void 0:n.body),r=nE(i),a=s?[r].concat(r.visualViewport||[],nF(i)?i:[]):i,o=t.concat(a);return s?o:o.concat(n$(nB(a)))}function nZ(e){return nO(e)&&"fixed"!==nU(e).position?e.offsetParent:null}function nH(e){for(var t=nE(e),n=nZ(e);n&&["table","td","th"].indexOf(nk(n))>=0&&"static"===nU(n).position;)n=nZ(n);return n&&("html"===nk(n)||"body"===nk(n)&&"static"===nU(n).position)?t:n||function(e){var t=/firefox/i.test(nL());if(/Trident/i.test(nL())&&nO(e)&&"fixed"===nU(e).position)return null;var n=nB(e);for(nA(n)&&(n=n.host);nO(n)&&0>["html","body"].indexOf(nk(n));){var i=nU(n);if("none"!==i.transform||"none"!==i.perspective||"paint"===i.contain||-1!==["transform","perspective"].indexOf(i.willChange)||t&&"filter"===i.willChange||t&&i.filter&&"none"!==i.filter)return n;n=n.parentNode}return null}(e)||t}var nV="bottom",nq="right",nK="left",nY="auto",nG=["top",nV,nq,nK],nJ="start",nX="viewport",nQ="popper",n0=nG.reduce(function(e,t){return e.concat([t+"-"+nJ,t+"-end"])},[]),n1=[].concat(nG,[nY]).reduce(function(e,t){return e.concat([t,t+"-"+nJ,t+"-end"])},[]),n2=["beforeRead","read","afterRead","beforeMain","main","afterMain","beforeWrite","write","afterWrite"],n5={placement:"bottom",modifiers:[],strategy:"absolute"};function n6(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return!t.some(function(e){return!(e&&"function"==typeof e.getBoundingClientRect)})}var n3={passive:!0};function n8(e){return e.split("-")[0]}function n4(e){return e.split("-")[1]}function n9(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function n7(e){var t,n=e.reference,i=e.element,s=e.placement,r=s?n8(s):null,a=s?n4(s):null,o=n.x+n.width/2-i.width/2,l=n.y+n.height/2-i.height/2;switch(r){case"top":t={x:o,y:n.y-i.height};break;case nV:t={x:o,y:n.y+n.height};break;case nq:t={x:n.x+n.width,y:l};break;case nK:t={x:n.x-i.width,y:l};break;default:t={x:n.x,y:n.y}}var d=r?n9(r):null;if(null!=d){var c="y"===d?"height":"width";switch(a){case nJ:t[d]=t[d]-(n[c]/2-i[c]/2);break;case"end":t[d]=t[d]+(n[c]/2-i[c]/2)}}return t}var ie={top:"auto",right:"auto",bottom:"auto",left:"auto"};function it(e){var t,n,i,s,r,a,o,l=e.popper,d=e.popperRect,c=e.placement,h=e.variation,u=e.offsets,p=e.position,f=e.gpuAcceleration,g=e.adaptive,m=e.roundOffsets,w=e.isFixed,b=u.x,v=void 0===b?0:b,_=u.y,y=void 0===_?0:_,x="function"==typeof m?m({x:v,y:y}):{x:v,y:y};v=x.x,y=x.y;var S=u.hasOwnProperty("x"),k=u.hasOwnProperty("y"),E=nK,C="top",O=window;if(g){var A=nH(l),I="clientHeight",z="clientWidth";A===nE(l)&&"static"!==nU(A=nj(l)).position&&"absolute"===p&&(I="scrollHeight",z="scrollWidth"),("top"===c||(c===nK||c===nq)&&"end"===h)&&(C=nV,y-=(w&&A===O&&O.visualViewport?O.visualViewport.height:A[I])-d.height,y*=f?1:-1),(c===nK||("top"===c||c===nV)&&"end"===h)&&(E=nq,v-=(w&&A===O&&O.visualViewport?O.visualViewport.width:A[z])-d.width,v*=f?1:-1)}var D=Object.assign({position:p},g&&ie),N=!0===m?(t={x:v,y:y},n=nE(l),i=t.x,s=t.y,{x:nN(i*(r=n.devicePixelRatio||1))/r||0,y:nN(s*r)/r||0}):{x:v,y:y};return(v=N.x,y=N.y,f)?Object.assign({},D,((o={})[C]=k?"0":"",o[E]=S?"0":"",o.transform=1>=(O.devicePixelRatio||1)?"translate("+v+"px, "+y+"px)":"translate3d("+v+"px, "+y+"px, 0)",o)):Object.assign({},D,((a={})[C]=k?y+"px":"",a[E]=S?v+"px":"",a.transform="",a))}var ii={left:"right",right:"left",bottom:"top",top:"bottom"};function is(e){return e.replace(/left|right|bottom|top/g,function(e){return ii[e]})}var ir={start:"end",end:"start"};function ia(e){return e.replace(/start|end/g,function(e){return ir[e]})}function io(e,t){var n=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(n&&nA(n)){var i=t;do{if(i&&e.isSameNode(i))return!0;i=i.parentNode||i.host}while(i)}return!1}function il(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function id(e,t,n){var i,s,r,a,o,l,d,c,h,u;return t===nX?il(function(e,t){var n=nE(e),i=nj(e),s=n.visualViewport,r=i.clientWidth,a=i.clientHeight,o=0,l=0;if(s){r=s.width,a=s.height;var d=nM();(d||!d&&"fixed"===t)&&(o=s.offsetLeft,l=s.offsetTop)}return{width:r,height:a,x:o+nR(e),y:l}}(e,n)):nC(t)?((i=nT(t,!1,"fixed"===n)).top=i.top+t.clientTop,i.left=i.left+t.clientLeft,i.bottom=i.top+t.clientHeight,i.right=i.left+t.clientWidth,i.width=t.clientWidth,i.height=t.clientHeight,i.x=i.left,i.y=i.top,i):il((s=nj(e),a=nj(s),o=nW(s),l=null==(r=s.ownerDocument)?void 0:r.body,d=nz(a.scrollWidth,a.clientWidth,l?l.scrollWidth:0,l?l.clientWidth:0),c=nz(a.scrollHeight,a.clientHeight,l?l.scrollHeight:0,l?l.clientHeight:0),h=-o.scrollLeft+nR(s),u=-o.scrollTop,"rtl"===nU(l||a).direction&&(h+=nz(a.clientWidth,l?l.clientWidth:0)-d),{width:d,height:c,x:h,y:u}))}function ic(){return{top:0,right:0,bottom:0,left:0}}function ih(e){return Object.assign({},ic(),e)}function iu(e,t){return t.reduce(function(t,n){return t[n]=e,t},{})}function ip(e,t){void 0===t&&(t={});var n,i,s,r,a,o,l,d,c=t,h=c.placement,u=void 0===h?e.placement:h,p=c.strategy,f=void 0===p?e.strategy:p,g=c.boundary,m=c.rootBoundary,w=c.elementContext,b=void 0===w?nQ:w,v=c.altBoundary,_=c.padding,y=void 0===_?0:_,x=ih("number"!=typeof y?y:iu(y,nG)),S=e.rects.popper,k=e.elements[void 0!==v&&v?b===nQ?"reference":nQ:b],E=(n=nC(k)?k:k.contextElement||nj(e.elements.popper),i=void 0===g?"clippingParents":g,s=void 0===m?nX:m,l=(o=[].concat("clippingParents"===i?(r=n$(nB(n)),!nC(a=["absolute","fixed"].indexOf(nU(n).position)>=0&&nO(n)?nH(n):n)?[]:r.filter(function(e){return nC(e)&&io(e,a)&&"body"!==nk(e)})):[].concat(i),[s]))[0],(d=o.reduce(function(e,t){var i=id(n,t,f);return e.top=nz(i.top,e.top),e.right=nD(i.right,e.right),e.bottom=nD(i.bottom,e.bottom),e.left=nz(i.left,e.left),e},id(n,l,f))).width=d.right-d.left,d.height=d.bottom-d.top,d.x=d.left,d.y=d.top,d),C=nT(e.elements.reference),O=n7({reference:C,element:S,strategy:"absolute",placement:u}),A=il(Object.assign({},S,O)),I=b===nQ?A:C,z={top:E.top-I.top+x.top,bottom:I.bottom-E.bottom+x.bottom,left:E.left-I.left+x.left,right:I.right-E.right+x.right},D=e.modifiersData.offset;if(b===nQ&&D){var N=D[u];Object.keys(z).forEach(function(e){var t=[nq,nV].indexOf(e)>=0?1:-1,n=["top",nV].indexOf(e)>=0?"y":"x";z[e]+=N[n]*t})}return z}function ig(e,t,n){return nz(e,nD(t,n))}function im(e,t,n){return void 0===n&&(n={x:0,y:0}),{top:e.top-t.height-n.y,right:e.right-t.width+n.x,bottom:e.bottom-t.height+n.y,left:e.left-t.width-n.x}}function iw(e){return["top",nq,nV,nK].some(function(t){return e[t]>=0})}var ib=(j=void 0===(W=(T={defaultModifiers:[{name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:function(e){var t=e.state,n=e.instance,i=e.options,s=i.scroll,r=void 0===s||s,a=i.resize,o=void 0===a||a,l=nE(t.elements.popper),d=[].concat(t.scrollParents.reference,t.scrollParents.popper);return r&&d.forEach(function(e){e.addEventListener("scroll",n.update,n3)}),o&&l.addEventListener("resize",n.update,n3),function(){r&&d.forEach(function(e){e.removeEventListener("scroll",n.update,n3)}),o&&l.removeEventListener("resize",n.update,n3)}},data:{}},{name:"popperOffsets",enabled:!0,phase:"read",fn:function(e){var t=e.state,n=e.name;t.modifiersData[n]=n7({reference:t.rects.reference,element:t.rects.popper,strategy:"absolute",placement:t.placement})},data:{}},{name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:function(e){var t=e.state,n=e.options,i=n.gpuAcceleration,s=n.adaptive,r=n.roundOffsets,a=void 0===r||r,o={placement:n8(t.placement),variation:n4(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:void 0===i||i,isFixed:"fixed"===t.options.strategy};null!=t.modifiersData.popperOffsets&&(t.styles.popper=Object.assign({},t.styles.popper,it(Object.assign({},o,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:void 0===s||s,roundOffsets:a})))),null!=t.modifiersData.arrow&&(t.styles.arrow=Object.assign({},t.styles.arrow,it(Object.assign({},o,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:a})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})},data:{}},nI,{name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:function(e){var t=e.state,n=e.options,i=e.name,s=n.offset,r=void 0===s?[0,0]:s,a=n1.reduce(function(e,n){var i,s,a,o,l,d;return e[n]=(i=t.rects,a=[nK,"top"].indexOf(s=n8(n))>=0?-1:1,l=(o="function"==typeof r?r(Object.assign({},i,{placement:n})):r)[0],d=o[1],l=l||0,d=(d||0)*a,[nK,nq].indexOf(s)>=0?{x:d,y:l}:{x:l,y:d}),e},{}),o=a[t.placement],l=o.x,d=o.y;null!=t.modifiersData.popperOffsets&&(t.modifiersData.popperOffsets.x+=l,t.modifiersData.popperOffsets.y+=d),t.modifiersData[i]=a}},{name:"flip",enabled:!0,phase:"main",fn:function(e){var t=e.state,n=e.options,i=e.name;if(!t.modifiersData[i]._skip){for(var s=n.mainAxis,r=void 0===s||s,a=n.altAxis,o=void 0===a||a,l=n.fallbackPlacements,d=n.padding,c=n.boundary,h=n.rootBoundary,u=n.altBoundary,p=n.flipVariations,f=void 0===p||p,g=n.allowedAutoPlacements,m=t.options.placement,w=n8(m)===m,b=l||(w||!f?[is(m)]:function(e){if(n8(e)===nY)return[];var t=is(e);return[ia(e),t,ia(t)]}(m)),v=[m].concat(b).reduce(function(e,n){var i,s,r,a,o,l,u,p,m,w,b,v;return e.concat(n8(n)===nY?(s=(i={placement:n,boundary:c,rootBoundary:h,padding:d,flipVariations:f,allowedAutoPlacements:g}).placement,r=i.boundary,a=i.rootBoundary,o=i.padding,l=i.flipVariations,p=void 0===(u=i.allowedAutoPlacements)?n1:u,0===(b=(w=(m=n4(s))?l?n0:n0.filter(function(e){return n4(e)===m}):nG).filter(function(e){return p.indexOf(e)>=0})).length&&(b=w),Object.keys(v=b.reduce(function(e,n){return e[n]=ip(t,{placement:n,boundary:r,rootBoundary:a,padding:o})[n8(n)],e},{})).sort(function(e,t){return v[e]-v[t]})):n)},[]),_=t.rects.reference,y=t.rects.popper,x=new Map,S=!0,k=v[0],E=0;E<v.length;E++){var C=v[E],O=n8(C),A=n4(C)===nJ,I=["top",nV].indexOf(O)>=0,z=I?"width":"height",D=ip(t,{placement:C,boundary:c,rootBoundary:h,altBoundary:u,padding:d}),N=I?A?nq:nK:A?nV:"top";_[z]>y[z]&&(N=is(N));var L=is(N),M=[];if(r&&M.push(D[O]<=0),o&&M.push(D[N]<=0,D[L]<=0),M.every(function(e){return e})){k=C,S=!1;break}x.set(C,M)}if(S)for(var T=f?3:1,W=function(e){var t=v.find(function(t){var n=x.get(t);if(n)return n.slice(0,e).every(function(e){return e})});if(t)return k=t,"break"},j=T;j>0&&"break"!==W(j);j--);t.placement!==k&&(t.modifiersData[i]._skip=!0,t.placement=k,t.reset=!0)}},requiresIfExists:["offset"],data:{_skip:!1}},{name:"preventOverflow",enabled:!0,phase:"main",fn:function(e){var t=e.state,n=e.options,i=e.name,s=n.mainAxis,r=n.altAxis,a=n.boundary,o=n.rootBoundary,l=n.altBoundary,d=n.padding,c=n.tether,h=void 0===c||c,u=n.tetherOffset,p=void 0===u?0:u,f=ip(t,{boundary:a,rootBoundary:o,padding:d,altBoundary:l}),g=n8(t.placement),m=n4(t.placement),w=!m,b=n9(g),v="x"===b?"y":"x",_=t.modifiersData.popperOffsets,y=t.rects.reference,x=t.rects.popper,S="function"==typeof p?p(Object.assign({},t.rects,{placement:t.placement})):p,k="number"==typeof S?{mainAxis:S,altAxis:S}:Object.assign({mainAxis:0,altAxis:0},S),E=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null,C={x:0,y:0};if(_){if(void 0===s||s){var O,A="y"===b?"top":nK,I="y"===b?nV:nq,z="y"===b?"height":"width",D=_[b],N=D+f[A],L=D-f[I],M=h?-x[z]/2:0,T=m===nJ?y[z]:x[z],W=m===nJ?-x[z]:-y[z],j=t.elements.arrow,R=h&&j?nP(j):{width:0,height:0},U=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:ic(),F=U[A],P=U[I],B=ig(0,y[z],R[z]),$=w?y[z]/2-M-B-F-k.mainAxis:T-B-F-k.mainAxis,Z=w?-y[z]/2+M+B+P+k.mainAxis:W+B+P+k.mainAxis,H=t.elements.arrow&&nH(t.elements.arrow),V=H?"y"===b?H.clientTop||0:H.clientLeft||0:0,q=null!=(O=null==E?void 0:E[b])?O:0,K=ig(h?nD(N,D+$-q-V):N,D,h?nz(L,D+Z-q):L);_[b]=K,C[b]=K-D}if(void 0!==r&&r){var Y,G,J="x"===b?"top":nK,X="x"===b?nV:nq,Q=_[v],ee="y"===v?"height":"width",et=Q+f[J],en=Q-f[X],ei=-1!==["top",nK].indexOf(g),es=null!=(G=null==E?void 0:E[v])?G:0,er=ei?et:Q-y[ee]-x[ee]-es+k.altAxis,ea=ei?Q+y[ee]+x[ee]-es-k.altAxis:en,eo=h&&ei?(Y=ig(er,Q,ea))>ea?ea:Y:ig(h?er:et,Q,h?ea:en);_[v]=eo,C[v]=eo-Q}t.modifiersData[i]=C}},requiresIfExists:["offset"]},{name:"arrow",enabled:!0,phase:"main",fn:function(e){var t,n=e.state,i=e.name,s=e.options,r=n.elements.arrow,a=n.modifiersData.popperOffsets,o=n8(n.placement),l=n9(o),d=[nK,nq].indexOf(o)>=0?"height":"width";if(r&&a){var c,h=(c=s.padding,ih("number"!=typeof(c="function"==typeof c?c(Object.assign({},n.rects,{placement:n.placement})):c)?c:iu(c,nG))),u=nP(r),p="y"===l?"top":nK,f="y"===l?nV:nq,g=n.rects.reference[d]+n.rects.reference[l]-a[l]-n.rects.popper[d],m=a[l]-n.rects.reference[l],w=nH(r),b=w?"y"===l?w.clientHeight||0:w.clientWidth||0:0,v=h[p],_=b-u[d]-h[f],y=b/2-u[d]/2+(g/2-m/2),x=ig(v,y,_);n.modifiersData[i]=((t={})[l]=x,t.centerOffset=x-y,t)}},effect:function(e){var t=e.state,n=e.options.element,i=void 0===n?"[data-popper-arrow]":n;null==i||("string"!=typeof i||(i=t.elements.popper.querySelector(i)))&&io(t.elements.popper,i)&&(t.elements.arrow=i)},requires:["popperOffsets"],requiresIfExists:["preventOverflow"]},{name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:function(e){var t=e.state,n=e.name,i=t.rects.reference,s=t.rects.popper,r=t.modifiersData.preventOverflow,a=ip(t,{elementContext:"reference"}),o=ip(t,{altBoundary:!0}),l=im(a,i),d=im(o,s,r),c=iw(l),h=iw(d);t.modifiersData[n]={referenceClippingOffsets:l,popperEscapeOffsets:d,isReferenceHidden:c,hasPopperEscaped:h},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":c,"data-popper-escaped":h})}}]}).defaultModifiers)?[]:W,U=void 0===(R=T.defaultOptions)?n5:R,function(e,t,n){void 0===n&&(n=U);var i,s,r={placement:"bottom",orderedModifiers:[],options:Object.assign({},n5,U),modifiersData:{},elements:{reference:e,popper:t},attributes:{},styles:{}},a=[],o=!1,l={state:r,setOptions:function(n){var i,s,o,c,h,u,p="function"==typeof n?n(r.options):n;d(),r.options=Object.assign({},U,r.options,p),r.scrollParents={reference:nC(e)?n$(e):e.contextElement?n$(e.contextElement):[],popper:n$(t)};var f=(s=Object.keys(i=[].concat(j,r.options.modifiers).reduce(function(e,t){var n=e[t.name];return e[t.name]=n?Object.assign({},n,t,{options:Object.assign({},n.options,t.options),data:Object.assign({},n.data,t.data)}):t,e},{})).map(function(e){return i[e]}),o=new Map,c=new Set,h=[],s.forEach(function(e){o.set(e.name,e)}),s.forEach(function(e){c.has(e.name)||function e(t){c.add(t.name),[].concat(t.requires||[],t.requiresIfExists||[]).forEach(function(t){if(!c.has(t)){var n=o.get(t);n&&e(n)}}),h.push(t)}(e)}),u=h,n2.reduce(function(e,t){return e.concat(u.filter(function(e){return e.phase===t}))},[]));return r.orderedModifiers=f.filter(function(e){return e.enabled}),r.orderedModifiers.forEach(function(e){var t=e.name,n=e.options,i=e.effect;if("function"==typeof i){var s=i({state:r,name:t,instance:l,options:void 0===n?{}:n});a.push(s||function(){})}}),l.update()},forceUpdate:function(){if(!o){var e=r.elements,t=e.reference,n=e.popper;if(n6(t,n)){r.rects={reference:(i=nH(n),s="fixed"===r.options.strategy,a=nO(i),u=nO(i)&&(c=nN((d=i.getBoundingClientRect()).width)/i.offsetWidth||1,h=nN(d.height)/i.offsetHeight||1,1!==c||1!==h),p=nj(i),f=nT(t,u,s),g={scrollLeft:0,scrollTop:0},m={x:0,y:0},(a||!a&&!s)&&(("body"!==nk(i)||nF(p))&&(g=function(e){return e!==nE(e)&&nO(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:nW(e)}(i)),nO(i)?(m=nT(i,!0),m.x+=i.clientLeft,m.y+=i.clientTop):p&&(m.x=nR(p))),{x:f.left+g.scrollLeft-m.x,y:f.top+g.scrollTop-m.y,width:f.width,height:f.height}),popper:nP(n)},r.reset=!1,r.placement=r.options.placement,r.orderedModifiers.forEach(function(e){return r.modifiersData[e.name]=Object.assign({},e.data)});for(var i,s,a,d,c,h,u,p,f,g,m,w=0;w<r.orderedModifiers.length;w++){if(!0===r.reset){r.reset=!1,w=-1;continue}var b=r.orderedModifiers[w],v=b.fn,_=b.options,y=void 0===_?{}:_,x=b.name;"function"==typeof v&&(r=v({state:r,options:y,name:x,instance:l})||r)}}}},update:(i=function(){return new Promise(function(e){l.forceUpdate(),e(r)})},function(){return s||(s=new Promise(function(e){Promise.resolve().then(function(){s=void 0,e(i())})})),s}),destroy:function(){d(),o=!0}};if(!n6(e,t))return l;function d(){a.forEach(function(e){return e()}),a=[]}return l.setOptions(n).then(function(e){!o&&n.onFirstUpdate&&n.onFirstUpdate(e)}),l}),iv="tippy-content",i_="tippy-arrow",iy="tippy-svg-arrow",ix={passive:!0,capture:!0},iS=function(){return document.body};function ik(e,t,n){if(Array.isArray(e)){var i=e[t];return null==i?Array.isArray(n)?n[t]:n:i}return e}function iE(e,t){var n=({}).toString.call(e);return 0===n.indexOf("[object")&&n.indexOf(t+"]")>-1}function iC(e,t){return"function"==typeof e?e.apply(void 0,t):e}function iO(e,t){var n;return 0===t?e:function(i){clearTimeout(n),n=setTimeout(function(){e(i)},t)}}function iA(e){return[].concat(e)}function iI(e,t){-1===e.indexOf(t)&&e.push(t)}function iz(e){return[].slice.call(e)}function iD(e){return Object.keys(e).reduce(function(t,n){return void 0!==e[n]&&(t[n]=e[n]),t},{})}function iN(){return document.createElement("div")}function iL(e){return["Element","Fragment"].some(function(t){return iE(e,t)})}function iM(e,t){e.forEach(function(e){e&&(e.style.transitionDuration=t+"ms")})}function iT(e,t){e.forEach(function(e){e&&e.setAttribute("data-state",t)})}function iW(e,t,n){var i=t+"EventListener";["transitionend","webkitTransitionEnd"].forEach(function(t){e[i](t,n)})}function ij(e,t){for(var n,i=t;i;){if(e.contains(i))return!0;i=null==i.getRootNode||null==(n=i.getRootNode())?void 0:n.host}return!1}var iR={isTouch:!1},iU=0;function iF(){!iR.isTouch&&(iR.isTouch=!0,window.performance&&document.addEventListener("mousemove",iP))}function iP(){var e=performance.now();e-iU<20&&(iR.isTouch=!1,document.removeEventListener("mousemove",iP)),iU=e}function iB(){var e=document.activeElement;if(e&&e._tippy&&e._tippy.reference===e){var t=e._tippy;e.blur&&!t.state.isVisible&&e.blur()}}var i$="undefined"!=typeof window&&"undefined"!=typeof document&&!!window.msCrypto,iZ=Object.assign({appendTo:iS,aria:{content:"auto",expanded:"auto"},delay:0,duration:[300,250],getReferenceClientRect:null,hideOnClick:!0,ignoreAttributes:!1,interactive:!1,interactiveBorder:2,interactiveDebounce:0,moveTransition:"",offset:[0,10],onAfterUpdate:function(){},onBeforeUpdate:function(){},onCreate:function(){},onDestroy:function(){},onHidden:function(){},onHide:function(){},onMount:function(){},onShow:function(){},onShown:function(){},onTrigger:function(){},onUntrigger:function(){},onClickOutside:function(){},placement:"top",plugins:[],popperOptions:{},render:null,showOnCreate:!1,touch:!0,trigger:"mouseenter focus",triggerTarget:null},{animateFill:!1,followCursor:!1,inlinePositioning:!1,sticky:!1},{allowHTML:!1,animation:"fade",arrow:!0,content:"",inertia:!1,maxWidth:350,role:"tooltip",theme:"",zIndex:9999}),iH=Object.keys(iZ);function iV(e){var t=(e.plugins||[]).reduce(function(t,n){var i,s=n.name,r=n.defaultValue;return s&&(t[s]=void 0!==e[s]?e[s]:null!=(i=iZ[s])?i:r),t},{});return Object.assign({},e,t)}function iq(e,t){var n,i=Object.assign({},t,{content:iC(t.content,[e])},t.ignoreAttributes?{}:((n=t.plugins)?Object.keys(iV(Object.assign({},iZ,{plugins:n}))):iH).reduce(function(t,n){var i=(e.getAttribute("data-tippy-"+n)||"").trim();if(!i)return t;if("content"===n)t[n]=i;else try{t[n]=JSON.parse(i)}catch(e){t[n]=i}return t},{}));return i.aria=Object.assign({},iZ.aria,i.aria),i.aria={expanded:"auto"===i.aria.expanded?t.interactive:i.aria.expanded,content:"auto"===i.aria.content?t.interactive?null:"describedby":i.aria.content},i}function iK(e,t){e.innerHTML=t}function iY(e){var t=iN();return!0===e?t.className=i_:(t.className=iy,iL(e)?t.appendChild(e):iK(t,e)),t}function iG(e,t){iL(t.content)?(iK(e,""),e.appendChild(t.content)):"function"!=typeof t.content&&(t.allowHTML?iK(e,t.content):e.textContent=t.content)}function iJ(e){var t=e.firstElementChild,n=iz(t.children);return{box:t,content:n.find(function(e){return e.classList.contains(iv)}),arrow:n.find(function(e){return e.classList.contains(i_)||e.classList.contains(iy)}),backdrop:n.find(function(e){return e.classList.contains("tippy-backdrop")})}}function iX(e){var t=iN(),n=iN();n.className="tippy-box",n.setAttribute("data-state","hidden"),n.setAttribute("tabindex","-1");var i=iN();function s(n,i){var s=iJ(t),r=s.box,a=s.content,o=s.arrow;i.theme?r.setAttribute("data-theme",i.theme):r.removeAttribute("data-theme"),"string"==typeof i.animation?r.setAttribute("data-animation",i.animation):r.removeAttribute("data-animation"),i.inertia?r.setAttribute("data-inertia",""):r.removeAttribute("data-inertia"),r.style.maxWidth="number"==typeof i.maxWidth?i.maxWidth+"px":i.maxWidth,i.role?r.setAttribute("role",i.role):r.removeAttribute("role"),(n.content!==i.content||n.allowHTML!==i.allowHTML)&&iG(a,e.props),i.arrow?o?n.arrow!==i.arrow&&(r.removeChild(o),r.appendChild(iY(i.arrow))):r.appendChild(iY(i.arrow)):o&&r.removeChild(o)}return i.className=iv,i.setAttribute("data-state","hidden"),iG(i,e.props),t.appendChild(n),n.appendChild(i),s(e.props,e.props),{popper:t,onUpdate:s}}iX.$$tippy=!0;var iQ=1,i0=[],i1=[];function i2(e,t){void 0===t&&(t={});var n,i=iZ.plugins.concat(t.plugins||[]);document.addEventListener("touchstart",iF,ix),window.addEventListener("blur",iB);var s=Object.assign({},t,{plugins:i}),r=(iL(n=e)?[n]:iE(n,"NodeList")?iz(n):Array.isArray(n)?n:iz(document.querySelectorAll(n))).reduce(function(e,t){var n=t&&function(e,t){var n,i,s,r,a,o,l,d,c=iq(e,Object.assign({},iZ,iV(iD(t)))),h=!1,u=!1,p=!1,f=!1,g=[],m=iO(H,c.interactiveDebounce),w=iQ++,b=(n=c.plugins).filter(function(e,t){return n.indexOf(e)===t}),v={id:w,reference:e,popper:iN(),popperInstance:null,props:c,state:{isEnabled:!0,isVisible:!1,isDestroyed:!1,isMounted:!1,isShown:!1},plugins:b,clearDelayTimeouts:function(){clearTimeout(i),clearTimeout(s),cancelAnimationFrame(r)},setProps:function(t){if(!v.state.isDestroyed){D("onBeforeUpdate",[v,t]),$();var n=v.props,i=iq(e,Object.assign({},n,iD(t),{ignoreAttributes:!0}));v.props=i,B(),n.interactiveDebounce!==i.interactiveDebounce&&(M(),m=iO(H,i.interactiveDebounce)),n.triggerTarget&&!i.triggerTarget?iA(n.triggerTarget).forEach(function(e){e.removeAttribute("aria-expanded")}):i.triggerTarget&&e.removeAttribute("aria-expanded"),L(),z(),x&&x(n,i),v.popperInstance&&(Y(),J().forEach(function(e){requestAnimationFrame(e._tippy.popperInstance.forceUpdate)})),D("onAfterUpdate",[v,t])}},setContent:function(e){v.setProps({content:e})},show:function(){var t=v.state.isVisible,n=v.state.isDestroyed,i=!v.state.isEnabled,s=iR.isTouch&&!v.props.touch,r=ik(v.props.duration,0,iZ.duration);if(!(t||n||i||s||(d||e).hasAttribute("disabled"))&&(D("onShow",[v],!1),!1!==v.props.onShow(v))){if(v.state.isVisible=!0,O()&&(y.style.visibility="visible"),z(),R(),v.state.isMounted||(y.style.transition="none"),O()){var a,o,c,h=iJ(y);iM([h.box,h.content],0)}l=function(){var e;if(v.state.isVisible&&!f){if(f=!0,y.offsetHeight,y.style.transition=v.props.moveTransition,O()&&v.props.animation){var t=iJ(y),n=t.box,i=t.content;iM([n,i],r),iT([n,i],"visible")}N(),L(),iI(i1,v),null==(e=v.popperInstance)||e.forceUpdate(),D("onMount",[v]),v.props.animation&&O()&&F(r,function(){v.state.isShown=!0,D("onShown",[v])})}},o=v.props.appendTo,c=d||e,(a=v.props.interactive&&o===iS||"parent"===o?c.parentNode:iC(o,[c])).contains(y)||a.appendChild(y),v.state.isMounted=!0,Y()}},hide:function(){var e=!v.state.isVisible,t=v.state.isDestroyed,n=!v.state.isEnabled,i=ik(v.props.duration,1,iZ.duration);if(!e&&!t&&!n&&(D("onHide",[v],!1),!1!==v.props.onHide(v))){if(v.state.isVisible=!1,v.state.isShown=!1,f=!1,h=!1,O()&&(y.style.visibility="hidden"),M(),U(),z(!0),O()){var s,r=iJ(y),a=r.box,o=r.content;v.props.animation&&(iM([a,o],i),iT([a,o],"hidden"))}(N(),L(),v.props.animation)?O()&&(s=v.unmount,F(i,function(){!v.state.isVisible&&y.parentNode&&y.parentNode.contains(y)&&s()})):v.unmount()}},hideWithInteractivity:function(e){A().addEventListener("mousemove",m),iI(i0,m),m(e)},enable:function(){v.state.isEnabled=!0},disable:function(){v.hide(),v.state.isEnabled=!1},unmount:function(){v.state.isVisible&&v.hide(),v.state.isMounted&&(G(),J().forEach(function(e){e._tippy.unmount()}),y.parentNode&&y.parentNode.removeChild(y),i1=i1.filter(function(e){return e!==v}),v.state.isMounted=!1,D("onHidden",[v]))},destroy:function(){v.state.isDestroyed||(v.clearDelayTimeouts(),v.unmount(),$(),delete e._tippy,v.state.isDestroyed=!0,D("onDestroy",[v]))}};if(!c.render)return v;var _=c.render(v),y=_.popper,x=_.onUpdate;y.setAttribute("data-tippy-root",""),y.id="tippy-"+v.id,v.popper=y,e._tippy=v,y._tippy=v;var S=b.map(function(e){return e.fn(v)}),k=e.hasAttribute("aria-expanded");return B(),L(),z(),D("onCreate",[v]),c.showOnCreate&&X(),y.addEventListener("mouseenter",function(){v.props.interactive&&v.state.isVisible&&v.clearDelayTimeouts()}),y.addEventListener("mouseleave",function(){v.props.interactive&&v.props.trigger.indexOf("mouseenter")>=0&&A().addEventListener("mousemove",m)}),v;function E(){var e=v.props.touch;return Array.isArray(e)?e:[e,0]}function C(){return"hold"===E()[0]}function O(){var e;return!!(null!=(e=v.props.render)&&e.$$tippy)}function A(){var t,n,i=(d||e).parentNode;return i&&null!=(n=iA(i)[0])&&null!=(t=n.ownerDocument)&&t.body?n.ownerDocument:document}function I(e){return v.state.isMounted&&!v.state.isVisible||iR.isTouch||a&&"focus"===a.type?0:ik(v.props.delay,+!e,iZ.delay)}function z(e){void 0===e&&(e=!1),y.style.pointerEvents=v.props.interactive&&!e?"":"none",y.style.zIndex=""+v.props.zIndex}function D(e,t,n){if(void 0===n&&(n=!0),S.forEach(function(n){n[e]&&n[e].apply(n,t)}),n){var i;(i=v.props)[e].apply(i,t)}}function N(){var t=v.props.aria;if(t.content){var n="aria-"+t.content,i=y.id;iA(v.props.triggerTarget||e).forEach(function(e){var t=e.getAttribute(n);if(v.state.isVisible)e.setAttribute(n,t?t+" "+i:i);else{var s=t&&t.replace(i,"").trim();s?e.setAttribute(n,s):e.removeAttribute(n)}})}}function L(){!k&&v.props.aria.expanded&&iA(v.props.triggerTarget||e).forEach(function(t){v.props.interactive?t.setAttribute("aria-expanded",v.state.isVisible&&t===(d||e)?"true":"false"):t.removeAttribute("aria-expanded")})}function M(){A().removeEventListener("mousemove",m),i0=i0.filter(function(e){return e!==m})}function T(t){if(!iR.isTouch||!p&&"mousedown"!==t.type){var n=t.composedPath&&t.composedPath()[0]||t.target;if(!(v.props.interactive&&ij(y,n))){if(iA(v.props.triggerTarget||e).some(function(e){return ij(e,n)})){if(iR.isTouch||v.state.isVisible&&v.props.trigger.indexOf("click")>=0)return}else D("onClickOutside",[v,t]);!0===v.props.hideOnClick&&(v.clearDelayTimeouts(),v.hide(),u=!0,setTimeout(function(){u=!1}),v.state.isMounted||U())}}}function W(){p=!0}function j(){p=!1}function R(){var e=A();e.addEventListener("mousedown",T,!0),e.addEventListener("touchend",T,ix),e.addEventListener("touchstart",j,ix),e.addEventListener("touchmove",W,ix)}function U(){var e=A();e.removeEventListener("mousedown",T,!0),e.removeEventListener("touchend",T,ix),e.removeEventListener("touchstart",j,ix),e.removeEventListener("touchmove",W,ix)}function F(e,t){var n=iJ(y).box;function i(e){e.target===n&&(iW(n,"remove",i),t())}if(0===e)return t();iW(n,"remove",o),iW(n,"add",i),o=i}function P(t,n,i){void 0===i&&(i=!1),iA(v.props.triggerTarget||e).forEach(function(e){e.addEventListener(t,n,i),g.push({node:e,eventType:t,handler:n,options:i})})}function B(){C()&&(P("touchstart",Z,{passive:!0}),P("touchend",V,{passive:!0})),v.props.trigger.split(/\s+/).filter(Boolean).forEach(function(e){if("manual"!==e)switch(P(e,Z),e){case"mouseenter":P("mouseleave",V);break;case"focus":P(i$?"focusout":"blur",q);break;case"focusin":P("focusout",q)}})}function $(){g.forEach(function(e){var t=e.node,n=e.eventType,i=e.handler,s=e.options;t.removeEventListener(n,i,s)}),g=[]}function Z(e){var t,n=!1;if(!(!v.state.isEnabled||K(e))&&!u){var i=(null==(t=a)?void 0:t.type)==="focus";a=e,d=e.currentTarget,L(),!v.state.isVisible&&iE(e,"MouseEvent")&&i0.forEach(function(t){return t(e)}),"click"===e.type&&(0>v.props.trigger.indexOf("mouseenter")||h)&&!1!==v.props.hideOnClick&&v.state.isVisible?n=!0:X(e),"click"===e.type&&(h=!n),n&&!i&&Q(e)}}function H(t){var n,i,s,r=t.target,a=(d||e).contains(r)||y.contains(r);("mousemove"!==t.type||!a)&&(n=J().concat(y).map(function(e){var t,n=null==(t=e._tippy.popperInstance)?void 0:t.state;return n?{popperRect:e.getBoundingClientRect(),popperState:n,props:c}:null}).filter(Boolean),i=t.clientX,s=t.clientY,n.every(function(e){var t=e.popperRect,n=e.popperState,r=e.props.interactiveBorder,a=n.placement.split("-")[0],o=n.modifiersData.offset;if(!o)return!0;var l="bottom"===a?o.top.y:0,d="top"===a?o.bottom.y:0,c="right"===a?o.left.x:0,h="left"===a?o.right.x:0,u=t.top-s+l>r,p=s-t.bottom-d>r,f=t.left-i+c>r,g=i-t.right-h>r;return u||p||f||g})&&(M(),Q(t)))}function V(e){if(!(K(e)||v.props.trigger.indexOf("click")>=0&&h)){if(v.props.interactive)return void v.hideWithInteractivity(e);Q(e)}}function q(t){0>v.props.trigger.indexOf("focusin")&&t.target!==(d||e)||v.props.interactive&&t.relatedTarget&&y.contains(t.relatedTarget)||Q(t)}function K(e){return!!iR.isTouch&&C()!==e.type.indexOf("touch")>=0}function Y(){G();var t=v.props,n=t.popperOptions,i=t.placement,s=t.offset,r=t.getReferenceClientRect,a=t.moveTransition,o=O()?iJ(y).arrow:null,c=r?{getBoundingClientRect:r,contextElement:r.contextElement||d||e}:e,h=[{name:"offset",options:{offset:s}},{name:"preventOverflow",options:{padding:{top:2,bottom:2,left:5,right:5}}},{name:"flip",options:{padding:5}},{name:"computeStyles",options:{adaptive:!a}},{name:"$$tippy",enabled:!0,phase:"beforeWrite",requires:["computeStyles"],fn:function(e){var t=e.state;if(O()){var n=iJ(y).box;["placement","reference-hidden","escaped"].forEach(function(e){"placement"===e?n.setAttribute("data-placement",t.placement):t.attributes.popper["data-popper-"+e]?n.setAttribute("data-"+e,""):n.removeAttribute("data-"+e)}),t.attributes.popper={}}}}];O()&&o&&h.push({name:"arrow",options:{element:o,padding:3}}),h.push.apply(h,(null==n?void 0:n.modifiers)||[]),v.popperInstance=ib(c,y,Object.assign({},n,{placement:i,onFirstUpdate:l,modifiers:h}))}function G(){v.popperInstance&&(v.popperInstance.destroy(),v.popperInstance=null)}function J(){return iz(y.querySelectorAll("[data-tippy-root]"))}function X(e){v.clearDelayTimeouts(),e&&D("onTrigger",[v,e]),R();var t=I(!0),n=E(),s=n[0],r=n[1];iR.isTouch&&"hold"===s&&r&&(t=r),t?i=setTimeout(function(){v.show()},t):v.show()}function Q(e){if(v.clearDelayTimeouts(),D("onUntrigger",[v,e]),!v.state.isVisible)return void U();if(!(v.props.trigger.indexOf("mouseenter")>=0&&v.props.trigger.indexOf("click")>=0&&["mouseleave","mousemove"].indexOf(e.type)>=0)||!h){var t=I(!1);t?s=setTimeout(function(){v.state.isVisible&&v.hide()},t):r=requestAnimationFrame(function(){v.hide()})}}}(t,s);return n&&e.push(n),e},[]);return iL(e)?r[0]:r}i2.defaultProps=iZ,i2.setDefaultProps=function(e){Object.keys(e).forEach(function(t){iZ[t]=e[t]})},i2.currentInput=iR,Object.assign({},nI,{effect:function(e){var t=e.state,n={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};Object.assign(t.elements.popper.style,n.popper),t.styles=n,t.elements.arrow&&Object.assign(t.elements.arrow.style,n.arrow)}}),i2.setDefaultProps({render:iX});let i5=document.getElementById("expand"),i6=document.getElementById("footer"),i3=document.getElementById("hint"),i8=document.getElementById("include-profanity"),i4=document.getElementById("include-solution"),i9=document.getElementById("mode"),i7=document.getElementById("new"),se=document.getElementById("path"),st=document.getElementById("reset"),sn=document.getElementById("selection"),si=document.getElementById("share"),ss=document.querySelector("#statistics > ul"),sr=document.getElementById("status"),sa=document.querySelector("#swaps > ul"),so=document.getElementById("undo"),sl=document.getElementById("width"),sd=document.querySelector("#words > ul"),sc=window.confirm,sh=window.crypto,su=i2(si,{content:"Copied!",theme:"custom",trigger:"manual"});class sp{#I;#z;#o=new no({context:this});#Q;#l;constructor(){let e=[sp.Params.DrawerExpanded],t=sp.State.fromObject({version:sp.State.Version});this.#l=new nh(sp.CacheKey,t,{overrides:e});let n=this.#ee();n.version<sp.State.Version&&(console.warn(`Ignoring stale cache with version ${n.version}. Current version: ${sp.State.Version}`),this.#l.set(t)),this.#z=new nb;let i=this.#et(),s=this.#en();this.#Q=new nx(this.#z,s,i),this.#I=this.#Q.getConfiguration();let r=new URLSearchParams(tH.search);r.set(nx.Params.Id.key,sh.randomUUID().split("-")[0]),i7.href=`?${r.toString()}`,se.href=`?${nx.Params.Id.key}=${this.#I.id}`,se.textContent=this.#I.id,this.#o.add([{type:"change",element:i8,handler:this.#ei},{type:"change",element:i4,handler:this.#es},{type:"change",element:i9,handler:this.#er},{type:"change",element:sl,handler:this.#ea},{type:"click",element:i5,handler:this.#eo},{type:"click",element:i3,handler:this.#el},{type:"click",element:st,handler:this.reset},{type:"click",element:si,handler:this.share},{type:"click",element:sa,handler:this.#ed},{type:"click",element:so,handler:this.#ec},{type:"click",element:sd,handler:this.#eh},{type:nx.Events.Selection,handler:this.#eu},{type:nx.Events.Update,handler:this.#ep}]),this.#ef(),this.#eg(),this.#em()}reset(){return Promise.resolve().then(()=>{sc("Are you sure you want to reset the grid?")&&(this.#Q.reset(),this.update())})}async setup(){await this.#z.load(nb.Sources.Default),this.#Q.setup(),this.update();let e=this.#ee();for await(let t of Array.from(new Set(this.#Q.getState().getSources().filter(e=>e!==nb.Names.Default).concat(e.additionalSources))))await this.#z.load(nb.SourcesByName[t])}async share(){let{id:e,mode:t,width:n}=this.#I,i=`${n}x${n}`,s=this.#ee(),r=this.#Q.getState(),a=this.#Q.getStatistics(r),o=[`Path#${e} | ${i} | ${a.hiddenWordsGuessed}/${a.hiddenWordCount}`];t===nx.Modes.Challenge&&o.push(`Score: ${a.score} / ${a.progress}%`);let l="",d=a.moves.length-1;a.moves.forEach((e,i)=>{l+=e.getSymbol(t),i!==d&&(i+1)%n==0&&(l+="\n")}),l&&o.push(l);let c=r.getSources();c.length>1&&o.push(`Dictionary: ${c.join(" + ")}`),o.push(s.shareUrl.get(r,this.#I)),console.debug(o),await t2(o.join("\n")),su.show(),setTimeout(()=>su.hide(),1e3)}update(){this.#ew(),this.#eb(),this.#ev(),this.#e_(),this.#ey()}#ed(e){e.target.classList.contains(sp.ClassNames.Delete)&&(this.#Q.removeSwap(e.target.dataset.index),this.update())}#eh(e){e.target.classList.contains(sp.ClassNames.Delete)&&(this.#Q.removeWord(e.target.dataset.index),this.update())}#et(){return nx.Params.Mode.get()??nx.DefaultMode}#ee(){return sp.State.fromObject(this.#l.get())}#en(){return tJ(nx.Params.Width.get(),Number)??nx.DefaultWidth}#eo(){this.#l.set(sp.Params.DrawerExpanded.key,!this.#l.get(sp.Params.DrawerExpanded.key)),this.#ef()}#ep(){this.update()}#el(){this.#Q.hint(),this.#ew()}async #ei(e){let t=this.#ee();if(e.target.checked)t.additionalSources=Array.from(new Set(t.additionalSources.concat([nb.Names.Profanity]))),await this.#z.load(nb.Sources.Profanity);else{let e=t.additionalSources.findIndex(e=>e===nb.Names.Profanity);t.additionalSources.splice(e,1),this.#z.unload(nb.Names.Profanity)}this.#l.set(t)}#es(e){let t=this.#ee();t.shareUrl=t.shareUrl.copy({solution:e.target.checked}),this.#l.set(t)}#ec(){so.classList.contains(sp.ClassNames.Disabled)||this.#Q.undo()}#er(e){nx.Params.Mode.set(e.target.value),tQ()}#ea(e){nx.Params.Width.set(e.target.value),tQ()}#ef(){let e=this.#ee();i6.classList.toggle(sp.ClassNames.Expanded,e.drawerExpanded),i5.textContent=e.drawerExpanded?"expand_less":"expand_more",i8.checked=e.additionalSources.includes(nb.Names.Profanity),i4.checked=e.shareUrl.solution}#ew(){i3.classList.toggle(sp.ClassNames.Disabled,!this.#Q.hasHint())}#eu(){this.#e_();let e=this.#Q.getSelection();if(sn.replaceChildren(),sn.classList.remove(sp.ClassNames.WordValid),!e.cells.filter(e=>!e.getFlags().has(nd.Flags.Swap)).length)return;let t=document.createElement("span");t.textContent=e.content,t.classList.toggle(sp.ClassNames.WordValid,e.isValidWord);let n=[t];if(e.isValidWord){let t=document.createElement("span");if(t.classList.add(sp.ClassNames.WordInfo),this.#I.mode===nx.Modes.Pathfinder)t.textContent=tG(e.hiddenWordIndexes.length-e.content.length);else{let n=this.#Q.getConfiguration(),i=new nx.Move(nx.Move.Types.Spell,{match:e.match});t.textContent=new nw(n.width,e.cells,i).points}n.push(t)}sn.replaceChildren(...n)}#eb(){let e=this.#Q.getStatistics(),t=`${e.hiddenWordsGuessed}/${e.hiddenWordCount}`;this.#I.mode===nx.Modes.Challenge?(sr.textContent=e.score,ss.replaceChildren(...[{name:"Progress",value:`${e.progress}%`},{name:"Average Word Length",value:e.averageWordLength},{name:"Hidden Words Found",value:t},{name:"Your Best Score",value:`${e.best} (${e.bestDiff})`}].map(e=>{let t=document.createElement("span");t.textContent=e.name;let n=document.createElement("span");return n.textContent=e.value,sp.getListItem(t,n)}))):sr.textContent=t}#ev(){let e=this.#Q.getSwaps();sa.replaceChildren(...e.map((e,t)=>{let n=document.createElement("span");return n.classList.add(sp.ClassNames.Swap),n.textContent=`${e.map(e=>e.toUpperCase()).join("  ")}`,sp.getListItem(n,sp.getDeleteElement(t))}))}#e_(){let e=this.#Q.getMoves().filter(e=>e.type!==nx.Move.Types.Hint),t=this.#Q.getSelection(),n=0===e.length&&0===t.length;so.classList.toggle(sp.ClassNames.Disabled,n)}#eg(){let e=this.#et();i9.replaceChildren(...Object.entries(nx.Modes).map(([t,n])=>{let i=document.createElement("option");return i.textContent=t,i.value=n,n===e&&(i.selected=!0),i}))}#em(){let e=this.#en();sl.replaceChildren(...nx.Widths.map(t=>{let n=document.createElement("option");return n.textContent=`${t}x${t}`,n.value=t.toString(),t===e&&(n.selected=!0),n}))}#ey(){let e=this.#Q.getState(),t=this.#Q.getWords(e).reverse(),n=t.length,i=this.#I.mode===nx.Modes.Pathfinder;sd.replaceChildren(...t.map((t,s)=>{let r=t.move.value,a=document.createElement("span");a.textContent=`${n-s}.`;let o=document.createElement("a");o.classList.add(sp.ClassNames.Word,tY(sp.ClassNames.Word,"match",r.match)),o.href="https://en.wiktionary.org/wiki/"+t.content,o.target="_blank",o.textContent=t.content,o.title="See definition";let l=document.createElement("span");l.classList.add(sp.ClassNames.WordInfo),l.textContent=i?tG(e.configuration.words[r.hiddenWordIndex].length-t.content.length):t.points;let d=i?void 0:sp.getDeleteElement(s);return sp.getListItem([a,o,l],d)}))}static getDeleteElement(e){let t=document.createElement("span");return t.classList.add(sp.ClassNames.Delete,sp.ClassNames.Icon),t.dataset.index=e.toString(),t.textContent="delete",t.title="Delete",t}static getListItem(e,t){let n=document.createElement("li"),i=document.createElement("div");i.classList.add(sp.ClassNames.Container),n.append(i);let s=document.createElement("div");if(s.classList.add(sp.ClassNames.FlexLeft),s.append(...Array.isArray(e)?e:[e]),i.append(s),void 0!==t){let e=document.createElement("div");e.classList.add(sp.ClassNames.FlexRight),e.append(...Array.isArray(t)?t:[t]),i.append(e)}return n}static CacheKey="game";static ClassNames=Object.freeze({Container:"container",Delete:"delete",Disabled:"disabled",Expanded:"expanded",FlexLeft:"flex-left",FlexRight:"flex-right",Icon:"material-symbols-outlined",Share:"share",Swap:"swap",Word:"word",WordInfo:"word-info",WordValid:"word-valid"});static Params=Object.freeze({DrawerExpanded:nc.urlParams("drawerExpanded")});static State=class{additionalSources;drawerExpanded;shareUrl;version;constructor(e,t,n,i){this.drawerExpanded=e??!1,this.shareUrl=t??new sp.State.ShareUrl,this.additionalSources=n??[],this.version=i??0}static fromObject(e){return new sp.State(e.drawerExpanded,tJ(e.shareUrl,sp.State.ShareUrl.fromObject),e.additionalSources,e.version)}static ShareUrl=class{solution;constructor(e){this.solution=e??!1}copy(e){return new sp.State.ShareUrl(e.solution??this.solution)}get(e,t){let n=new URL(tB.href.split(/[?#]/)[0]);return n.searchParams.set(nx.Params.Id.key,t.id),n.searchParams.set(nx.Params.Mode.key,t.mode),n.searchParams.set(nx.Params.Width.key,t.width),this.solution&&n.searchParams.set(nx.Params.Solution.key,nx.Params.Solution.encode(e.solution)),n.toString()}static fromObject(e){return new sp.State.ShareUrl(e.solution)}};static Version=1}}tV.has(nx.Params.Solution.key)&&document.body.classList.add(sp.ClassNames.Share);let sf=document.getElementById("info"),sg=document.getElementById("info-dialog");sf.addEventListener("click",()=>{sg.open||sg.showModal()});let sm="G-44BJC1S0CM",sw=document.createElement("script");sw.setAttribute("src",`https://www.googletagmanager.com/gtag/js?id=${sm}`),document.head.append(sw);let sb=window.dataLayer=window.dataLayer||[];function sv(){sb.push(arguments)}sv("js",new Date),sv("config",sm);let s_=new sp;s_.setup(),window.addEventListener("popstate",()=>{window.location.reload()}),window.debug=t3,window.game=s_;
//# sourceMappingURL=paths.655ef82d.js.map
